(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{457:function(e){e.exports={a:"1.9.0"}},470:function(e,t,a){e.exports=a(770)},480:function(e,t,a){},528:function(e,t){},530:function(e,t){},608:function(e,t,a){},660:function(e,t,a){},661:function(e,t,a){},664:function(e,t,a){},665:function(e,t,a){},666:function(e,t,a){},667:function(e,t,a){},668:function(e,t,a){},669:function(e,t,a){},671:function(e,t,a){},672:function(e,t,a){},673:function(e,t,a){},674:function(e,t,a){},675:function(e,t,a){},735:function(e,t,a){},738:function(e,t,a){},739:function(e,t,a){},740:function(e,t,a){},741:function(e,t,a){},743:function(e,t,a){},744:function(e,t,a){},745:function(e,t,a){},746:function(e,t,a){},747:function(e,t,a){},748:function(e,t,a){},749:function(e,t,a){},752:function(e,t,a){},753:function(e,t,a){},754:function(e,t,a){},755:function(e,t,a){},756:function(e,t,a){},757:function(e,t,a){},758:function(e,t,a){},759:function(e,t,a){},760:function(e,t,a){},761:function(e,t,a){},763:function(e,t,a){},764:function(e,t,a){},765:function(e,t,a){},766:function(e,t,a){},767:function(e,t,a){},768:function(e,t,a){},769:function(e,t,a){},770:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(72),i=a.n(c),l=a(22),o=a(772),s=a(773),u=(a(479),a(480),a(89)),m=a(84),d=a(453),h=a(320),f=a.n(h),p=a(321),v=a.n(p),y=a(454),b=a.n(y),k=a(1),g=k.createRootReducer();var E=a(34),I=a(35),T=a(38),S=a(36),C=a(37),L=a(2),P=a.n(L),O=a(774);a(608);function R(e){var t=e.children;return r.a.createElement("div",{className:"Root"},r.a.createElement("div",{className:"Root-contents"},t))}var w=a(33),N=a.n(w),A=a(74),j=a(455),x=(a(660),function(){return r.a.createElement("div",{className:"Loading"},r.a.createElement(j.Pulse,{size:60,color:"var(--primary)"}))}),B=function(e){function t(){return Object(E.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){var e=Object(A.a)(N.a.mark(function e(){var t,a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.serverId,n=t.dispatch,e.next=3,n(Object(k.initializePlex)());case 3:if(null==a){e.next=10;break}return e.next=6,n(Object(k.fetchServerStatus)(a));case 6:return e.next=8,n(Object(k.usePlexServer)(a));case 8:return e.next=10,n(Object(k.fetchLibrarySections)());case 10:n(Object(k.setPlexReady)());case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(x,null)}}]),t}(n.Component),M=Object(l.b)(function(e){return{library:k.selectPlex.library(e),serverId:k.selectPlex.serverId(e)}})(B);a(661);var H=function(e){var t=e.pin;return r.a.createElement("div",{className:"LoginWithPin"},r.a.createElement("h1",{className:"LoginWithPin-logo"},"HiFi Kitchen"),r.a.createElement("p",{className:"LoginWithPin-tagline"},"A Music Player for Plex"),r.a.createElement("div",{className:"LoginWithPin-form"},r.a.createElement("p",null,"Copy this code to your clipboard"),r.a.createElement("h2",{className:"LoginWithPin-pin"},t.code),r.a.createElement("a",{href:"https://plex.tv/link",target:"_blank",rel:"noopener noreferrer",className:"LoginWithPin-button"},"Login With Plex")))},D=function(e){function t(){return Object(E.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){var e=this;(0,this.props.dispatch)(Object(k.fetchPin)()),this.interval=setInterval(function(){e.handleCheckPin()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"handleCheckPin",value:function(){var e=this.props,t=e.dispatch,a=e.pin;null!=a&&null!=a.id&&t(Object(k.checkPin)(a.id))}},{key:"render",value:function(){var e=this.props,t=e.pin;return e.loggedIn?r.a.createElement(O.a,{to:"/settings"}):r.a.createElement(H,{pin:t})}}]),t}(n.Component),q=Object(l.b)(function(e){return{loggedIn:k.selectUser.loggedIn(e),pin:k.selectPin.value(e)}})(D),U=a(456),Q=a(9),G=a.n(Q),Y=a(114),W=a.n(Y),z=a(5),F=a.n(z),K=a(771),_=(a(664),a(13)),V=a(4),J=a.n(V);a(665);function X(e){var t=e.className,a=e.icon,n=Object(_.a)(e,["className","icon"]),c=J()(t,"icon","icon-".concat(a));return r.a.createElement("div",Object.assign({className:c},n))}a(666),a(667);function Z(e){var t=e.selected,a=e.server,n=e.onSelect,c=a.status,i="",l=!1;switch(!0){case null==c||!1===c.available:i="Unavailable",l=!0;break;case c.connection.local:i="Nearby";break;default:i="Available"}var o=!l&&"https"===c.connection.protocol;return r.a.createElement("button",{className:J()("ServerListItem",{"ServerListItem-selected":t,"ServerListItem-unavailable":l,"ServerListItem-secure":o}),onClick:n},r.a.createElement("div",{className:"ServerListItem-text"},r.a.createElement("h1",{className:"ServerListItem-name"},a.name),r.a.createElement("h2",{className:"ServerListItem-status"},i)),r.a.createElement(X,{icon:"check",className:"ServerListItem-icon-ok ServerListItem-icon"}),r.a.createElement(X,{icon:"lock",className:"ServerListItem-icon-lock ServerListItem-icon"}),r.a.createElement(X,{icon:"attention",className:"ServerListItem-icon-warning ServerListItem-icon"}))}function $(e){var t=e.selectedId,a=e.servers,n=e.onChange;return r.a.createElement("div",{className:"ServerList"},a.map(function(e,a){return r.a.createElement(Z,{key:a,server:e,selected:e.id===t,onSelect:function(){return n&&n(e.id)}})}))}a(668),a(669);var ee={movie:"video",artist:"music",photo:"picture",show:"monitor"};function te(e){var t=e.section,a=e.selected,n=e.onSelect,c=ee[t.type];return r.a.createElement("button",{className:J()("LibrarySectionListItem",{"LibrarySectionListItem-selected":a}),onClick:n},r.a.createElement("h1",{className:"LibrarySectionListItem-title"},t.title),r.a.createElement(X,{icon:"ok",className:"LibrarySectionListItem-icon-ok LibrarySectionListItem-icon"}),r.a.createElement(X,{icon:c,className:"LibrarySectionListItem-icon-type LibrarySectionListItem-icon"}))}function ae(e){var t=e.sections,a=e.selectedId,n=e.onChange;return r.a.createElement("div",{className:"LibrarySectionList"},t.map(function(e,t){return r.a.createElement(te,{key:t,section:e,selected:e.id===a,onSelect:function(){return n&&n(e.id)}})}))}var ne=a(457);function re(e){var t=e.servers,a=e.selectedServerId,n=e.onSelectServer,c=e.librarySections,i=e.selectedLibrarySectionId,l=e.onSelectLibrarySection,o=e.onLogOut;return r.a.createElement("div",{className:"Settings"},r.a.createElement("div",{className:"Settings-contents"},r.a.createElement("h1",null,"Plex Server Settings"),t.length>0&&r.a.createElement("h2",{className:"Settings-sectionHeader"},"1. Select a Server"),r.a.createElement($,{servers:t,selectedId:a,onChange:n}),c.length>0&&r.a.createElement("h2",{className:"Settings-sectionHeader"},"2. Select your Music Library"),r.a.createElement(ae,{sections:c,selectedId:i,onChange:l}),null!=i&&r.a.createElement(K.a,{to:"/library",className:"Settings-doneButton"},"Done"),r.a.createElement("footer",{className:"Settings-footer"},r.a.createElement("button",{onClick:o,className:"Settings-logoutButton"},r.a.createElement(X,{icon:"logout"})," Log Out"),r.a.createElement("span",{className:"Settings-version"},"v",ne.a))))}function ce(){return(ce=Object(A.a)(N.a.mark(function e(){var t,a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t(Object(k.fetchAccountServers)());case 3:a=e.sent,k.selectAccountServers.value(a()).forEach(function(e){return t(Object(k.fetchServerStatus)(e))});case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ie(){return(ie=Object(A.a)(N.a.mark(function e(t){var a,n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.serverId,n=t.dispatch,r=this.props.serverId,a!==r&&n(Object(k.fetchLibrarySections)());case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var le=G()(Object(l.b)(function(e){return{accountServers:k.selectAccountServers.value(e),allDevices:k.selectAllDevices.values(e),allConnections:k.selectAllConnections.values(e),allStatuses:k.selectServerStatus.values(e),librarySections:k.selectLibrarySections.value(e),serverId:k.selectPlex.serverId(e),librarySectionId:Object(k.selectLibrarySectionId)(e)}}),W()({componentWillMount:function(){return ce.apply(this,arguments)},componentWillReceiveProps:function(e){return ie.apply(this,arguments)}}),F()({onSelectServer:function(e){return function(t){(0,e.dispatch)(Object(k.usePlexServer)(t))}},onSelectLibrarySection:function(e){return function(t){(0,e.dispatch)(Object(k.setLibrarySectionId)(t))}},onLogOut:function(){return function(){delete window.localStorage.plex,window.location.reload()}}}))(function(e){var t=e.accountServers,a=e.allDevices,n=e.allConnections,c=e.allStatuses,i=e.librarySections,l=e.librarySectionId,o=e.serverId,s=e.onSelectServer,u=e.onSelectLibrarySection,m=e.onLogOut,d=t.map(function(e){var t=c.get(e),r=t&&n.get(t.connection);return Object(U.a)({},a.get(e),{status:t,connection:r})});return r.a.createElement(re,{servers:d,selectedServerId:o,onSelectServer:s,librarySections:i,selectedLibrarySectionId:l,onSelectLibrarySection:u,onLogOut:m})}),oe=a(458),se=a.n(oe),ue=(a(671),a(672),a(59)),me=a(26),de=a.n(me),he="TRACK_CONTEXT_MENU",fe=G()(Object(ue.d)(he),de()({onNavigate:P.a.func.isRequired,trigger:P.a.shape({track:P.a.shape({}).isRequired})}),F()({onAddTrackToPlaylist:function(e){return function(){var t=e.trigger;(0,e.onAddTrackToPlaylist)((t&&t.track||{}).id)}},onRemoveItemFromPlaylist:function(e){return function(){var t=e.trigger,a=e.onRemoveItemFromPlaylist,n=t&&t.context,r=n&&n.playlistItem;null!=r&&a(r.id,r.playlistId)}},onGoToArtist:function(e){return function(){var t=e.trigger,a=e.onNavigate,n=t&&t.track||{};a(k.ARTIST,n.grandparentId)}},onGoToAlbum:function(e){return function(){var t=e.trigger,a=e.onNavigate,n=t&&t.track||{};a(k.ALBUM,n.parentId)}}}))(function(e){var t=e.id,a=e.trigger,n=e.onGoToArtist,c=e.onGoToAlbum,i=e.onAddTrackToPlaylist,l=e.onRemoveItemFromPlaylist;return r.a.createElement(ue.a,{id:t},r.a.createElement(ue.c,{onClick:c},"Go to Album"),r.a.createElement(ue.c,{onClick:n},"Go to Artist"),r.a.createElement(ue.c,{onClick:i},"Add to Playlist..."),a&&a.context&&a.context.playlistItem&&r.a.createElement(ue.c,{onClick:l},"Remove from Playlist"))}),pe=function(e){return r.a.createElement(fe,e)},ve=Object(l.b)(null)(function(e){var t=e.onNavigate,a=e.dispatch;return r.a.createElement(pe,{onAddTrackToPlaylist:G()(a,k.setTrackToAddToPlaylist),onRemoveItemFromPlaylist:G()(a,k.removeItemFromPlaylist),onNavigate:t})}),ye=a(90),be=a(21),ke=a.n(be);a(673);function ge(e){var t=e.item,a=e.components,n=t._type;if(!1===Object.hasOwnProperty.call(a,n))throw new Error('Type "'.concat(n,'" is not supported'));return a[n](t)}ge.propTypes={item:P.a.shape({_type:P.a.string}).isRequired,components:P.a.objectOf(P.a.func).isRequired};a(674),a(675);var Ee=a(177),Ie=a.n(Ee);function Te(e){var t=e.width,a=e.height,n=e.library,c=e.src,i=e.quality,l=Object(_.a)(e,["width","height","library","src","quality"]);if(null==c)return r.a.createElement("div",l);var o=n.resizePhoto({url:c,width:t,height:a,quality:i}),s="url(".concat(o,")");return r.a.createElement("div",Object.assign({},l,{style:{backgroundImage:s}}))}Te.defaultProps={width:400,height:400,quality:90,library:{resizePhoto:function(e){return e.url}}};var Se=Ie()({library:P.a.shape({})})(Te);function Ce(e){var t=e.imageClassName,a=e.className,n=e.src,c=e.size,i=e.quality;return r.a.createElement("div",{className:J()(a,"SquareImage")},r.a.createElement(Se,{className:J()(t,"SquareImage-container"),width:c,height:c,src:n,quality:i}))}function Le(e){var t=e.onSelect,a=e.image,n=e.title,c=e.subtitle,i=e.highlight,l=Object(_.a)(e,["onSelect","image","title","subtitle","highlight"]);return r.a.createElement("button",Object.assign({},l,{className:"GridItem",onClick:t}),r.a.createElement(Ce,{className:"GridItem-thumb",imageClassName:J()("GridItem-thumbImage",{"GridItem-thumbImage-highlight":i}),src:a,alt:n,size:300,quality:50}),r.a.createElement("div",{className:"GridItem-text"},r.a.createElement("h2",{className:"GridItem-title"},n),r.a.createElement("h3",{className:"GridItem-subtitle"},c)))}var Pe=F()({onSelect:function(e){return function(){var t=e.artist;(0,e.onSelect)(k.ARTIST,t.id)}}})(function(e){var t=e.artist,a=Object(_.a)(e,["artist"]);return r.a.createElement(Le,Object.assign({},a,{image:t.thumb,title:t.title,subtitle:t.genre.join(", ")}))});var Oe=F()({onSelect:function(e){return function(){var t=e.album;(0,e.onSelect)(k.ALBUM,t.id)}}})(function(e){var t=e.album,a=Object(_.a)(e,["album"]);return r.a.createElement(Le,Object.assign({},a,{image:t.thumb,title:t.title,subtitle:t.parentTitle}))}),Re=a(459),we=a.n(Re);var Ne=F()({onSelect:function(e){return function(){var t=e.playlist;(0,e.onSelect)(k.PLAYLIST,t.id)}}})(function(e){var t=e.playlist,a=Object(_.a)(e,["playlist"]);return r.a.createElement(Le,Object.assign({},a,{image:t.composite,title:t.title,subtitle:"".concat(t.leafCount," ").concat(we()("item",t.leafCount)),highlight:t.smart}))});var Ae=F()({onSelect:function(e){return function(){var t=e.track;(0,e.onSelect)(k.TRACK,t.id)}}})(function(e){var t=e.track,a=Object(_.a)(e,["track"]);return r.a.createElement(Le,Object.assign({},a,{image:t.thumb,title:t.title,subtitle:t.originalTitle}))});function je(e){var t=e.item,a=Object(_.a)(e,["item"]);return r.a.createElement(ge,{item:t,components:{artist:function(e){return r.a.createElement(Pe,Object.assign({},a,{artist:e}))},album:function(e){return r.a.createElement(Oe,Object.assign({},a,{album:e}))},playlist:function(e){return r.a.createElement(Ne,Object.assign({},a,{playlist:e}))},track:function(e){return r.a.createElement(Ae,Object.assign({},a,{track:e}))}}})}var xe=a(19),Be=a(20),Me=a(180),He=a.n(Me),De=(a(735),a(115)),qe=a.n(De);var Ue=qe()(function(e){var t=e.itemWidth,a=e.items,n=e.style,c=e.rowOffset,i=e.renderItem;return r.a.createElement("div",{className:"Grid-row",style:n},r.a.createElement("div",{className:"Grid-rowItems",style:{marginLeft:"".concat(c,"px")}},a.map(function(e,a){return r.a.createElement("div",{key:a,className:"Grid-item",style:{width:"".concat(t,"px"),minWidth:"".concat(t,"px")}},i(e))})))}),Qe=He()(),Ge=function(e){function t(){var e;return Object(E.a)(this,t),(e=Object(T.a)(this,Object(S.a)(t).call(this))).handleLoadMoreRows=e.handleLoadMoreRows.bind(Object(xe.a)(e)),e}return Object(C.a)(t,e),Object(I.a)(t,[{key:"calcRows",value:function(){var e=this.props,t=e.itemsPerRow;return e.items.reduce(function(e,a,n){return n%t===0&&e.push([]),e[e.length-1].push(a),e},[])}},{key:"calcTotal",value:function(){var e=this.props,t=e.items,a=e.total;return null!=a?a:t.length}},{key:"handleLoadMoreRows",value:function(e){var t=e.startIndex,a=e.stopIndex,n=this.props,r=n.onLoad,c=n.itemsPerRow;return r(t*c,(a+1)*c)}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.width,c=t.height,i=t.className,l=t.getItemHeight,o=t.itemsPerRow,s=t.paddingHorizontal,u=n-Qe-2*s,m=Math.floor(u/o),d=l(m),h=(n-Qe)%m/2,f=this.calcTotal(),p=this.calcRows(),v=Math.ceil(f/o),y=function(e){var t=e.index,n=e.key,c=e.style,i=p[t];return null==i?r.a.createElement("div",{key:n,style:c}):r.a.createElement(Ue,{key:n,style:c,rowOffset:h,itemWidth:m,items:i.filter(function(e){return null!=e}),renderItem:a})};return r.a.createElement("div",{className:J()(i,"Grid")},r.a.createElement(Be.c,{isRowLoaded:function(e){var t=e.index,a=p[t];return null!=a&&a.every(function(e){return null!=e})},loadMoreRows:this.handleLoadMoreRows,rowCount:v},function(t){var a=t.onRowsRendered,i=t.registerChild;return r.a.createElement(Be.d,{width:n,height:c,onRowsRendered:a,ref:function(t){e.list=t,i(t)},rowCount:v,rowHeight:d,rowRenderer:y,style:{overflowX:"hidden"}})}))}}]),t}(n.Component);function Ye(e){return function(t){return r.a.createElement(Be.a,null,function(a){var n=a.height,c=a.width;return r.a.createElement(e,Object.assign({},t,{width:c,height:n}))})}}Ge.defaultProps={itemsPerRow:5,getItemHeight:function(e){return e},paddingHorizontal:0};var We=Ye(Ge),ze=a(85),Fe=a.n(ze),Ke=Fe()("currentId","onChange",null),_e=G()(Ie()({router:P.a.shape({}).isRequired}),F()({onChange:function(e){var t=e.itemPath,a=e.router;return function(e){var n=t(e,a.params);a.push(n)}}}));function Ve(e){var t=e.onChange,a=Object(_.a)(e,["onChange"]);return r.a.createElement(We,Object.assign({},a,{itemsPerRow:6,getItemHeight:function(e){return e+50},paddingHorizontal:5}),function(e){return r.a.createElement(je,{item:e,onSelect:t})})}Ve.defaultProps={onChange:ke.a},Ve.withState=Ke(Ve),Ve.withRouter=_e(Ve);a(738),a(739),a(740);function Je(e){var t=e.src;return r.a.createElement("div",{className:"BlurImage"},r.a.createElement("div",{className:"BlurImage-blur"},r.a.createElement(Se,{className:"BlurImage-image",src:t})),r.a.createElement("div",{className:"BlurImage-shadow"}))}function Xe(e){var t=e.thumb,a=e.title,n=e.subtitle,c=e.meta,i=e.onClickSubtitle,l=e.onClickMeta,o=e.onClose,s=e.onRefresh,u=e.onEdit;return r.a.createElement("div",{className:"PanelHeader"},r.a.createElement(Je,{src:t}),r.a.createElement(Ce,{className:"PanelHeader-thumb",imageClassName:"PanelHeader-thumbImage",src:t,alt:a,size:150,quality:90}),r.a.createElement("div",{className:"PanelHeader-text"},r.a.createElement("div",{className:"PanelHeader-title"},a),r.a.createElement("button",{className:"PanelHeader-subtitle",onClick:i},n),r.a.createElement("button",{className:"PanelHeader-meta",onClick:l},c)),o&&r.a.createElement(X,{icon:"cancel",className:"PanelHeader-close",onClick:o}),s&&r.a.createElement(X,{icon:"cw",className:"PanelHeader-refresh",onClick:s}),u&&r.a.createElement(X,{icon:"pencil",className:"PanelHeader-edit",onClick:u}))}function Ze(e){var t=e.details,a=e.children,n=e.className,c=e.onClickSubtitle,i=e.onClickMeta,l=e.onClose,o=e.onRefresh,s=e.onEdit;return r.a.createElement("div",{className:J()(n,"Panel")},r.a.createElement(Xe,Object.assign({},t,{onClickSubtitle:c,onClickMeta:i,onClose:l,onRefresh:o,onEdit:s})),r.a.createElement("div",{className:"Panel-content"},a))}a(741);var $e=F()({onLoad:function(e){return function(t){var a=t.startIndex,n=t.stopIndex;return(0,e.onLoad)(a,n+1)}}})(function(e){var t=e.rowCount,a=e.renderItem,n=e.isRowLoaded,c=e.onLoad,i=Object(_.a)(e,["rowCount","renderItem","isRowLoaded","onLoad"]);return r.a.createElement(Be.c,{isRowLoaded:n,loadMoreRows:c,rowCount:t},function(e){var n=e.onRowsRendered,c=e.registerChild;return r.a.createElement(Be.d,Object.assign({},i,{rowCount:t,rowRenderer:a,onRowsRendered:n,ref:c}))})}),et=Ye($e),tt=a(86),at=a.n(tt);a(742);function nt(e){var t=e.value,a=e.unit,n=e.format,c=e.trim,i=e.stopTrim,l=Object(_.a)(e,["value","unit","format","trim","stopTrim"]),o=at.a.duration(t,a).format(n,{trim:c,stopTrim:i});return r.a.createElement("span",l,o)}nt.defaultProps={format:"h:mm:ss",unit:"ms",trim:!0,stopTrim:"mm"};a(743);function rt(e){for(var t=e.className,a=e.style,n=e.value,c=e.maxValue,i=e.hover,l=e.onClick,o=e.onMouseDown,s=e.onMouseOver,u=e.onMouseLeave,m=[],d="calc(".concat(100/c,"% - 1px)"),h=0;h<c;h+=1)m.push(r.a.createElement("div",{key:h,"data-key":h,style:{width:d},className:J()("RatingBars-bar",{"RatingBars-bar-active":h<n,"RatingBars-bar-hover":null!=i&&h<=i})}));return r.a.createElement("div",{style:a,className:J()(t,"RatingBars"),onClick:l,onMouseDown:o,onMouseOver:s,onMouseLeave:u},m)}rt.defaultProps={value:0,maxValue:5};var ct=G()(de()({onRate:P.a.func.isRequired}),Fe()("hover","setHover",null),F()({onClick:function(){return function(e){e.stopPropagation()}},onMouseDown:function(e){return function(){var t=e.hover;(0,e.onRate)(t+1)}},onMouseOver:function(e){return function(t){var a=e.setHover,n=t.target.getAttribute("data-key"),r=parseInt(n,10);!1===isNaN(r)&&a(r)}},onMouseLeave:function(e){return function(){(0,e.setHover)(null)}}}))(rt),it=a(87);a(744);var lt=new it.SortableHandle(function(e){var t=e.className;return r.a.createElement(X,{icon:"menu",className:J()("SortHandle",t)})});a(745);function ot(e){var t=e.paused,a=J()("SoundBars",{"SoundBars-paused":t});return r.a.createElement("div",{className:a},r.a.createElement("div",{className:"SoundBars-bar"}),r.a.createElement("div",{className:"SoundBars-bar"}),r.a.createElement("div",{className:"SoundBars-bar"}),r.a.createElement("div",{className:"SoundBars-bar"}))}a(746);var st=function(e){var t=e.playerState,a=e.track,n=e.trackIndex;return e.currentlyPlaying?r.a.createElement("span",{className:"TrackListItemHandle-nowPlayingIcon"},r.a.createElement(ot,{paused:t===k.PLAYER_STATE_PAUSED})):r.a.createElement("span",{className:"TrackListItemHandle-index"},null!=n?n:a.index)};var ut=function(e){return e.sortable?r.a.createElement("div",{className:"TrackListItemHandle-sortableContainer"},r.a.createElement(lt,{className:"TrackListItemHandle-sortHandle"}),r.a.createElement(st,e)):r.a.createElement("div",{className:"TrackListItemHandle-container"},r.a.createElement(st,e))};a(747);var mt=F()({onRate:function(e){return function(t){var a=e.track;(0,e.onRate)(a.id,t)}},onSelect:function(e){return function(){var t=e.track;(0,e.onSelect)(t)}}})(function(e){var t=e.context,a=e.track,n=e.style,c=e.displayArtist,i=e.relativeTrackStartTime,l=e.onSelect,o=e.onRate,s=e.onClickTime;return r.a.createElement(ue.b,{renderTag:"button",attributes:{className:"TrackListItem",style:n,onClick:l},id:he,context:t,track:a,collect:function(e){return e}},r.a.createElement("div",{className:"TrackListItem-contents"},r.a.createElement(ut,e),r.a.createElement("span",{className:"TrackListItem-fulltitle"},r.a.createElement("span",{className:"TrackListItem-title"},a.title),null!=c&&c!==a.originalTitle&&r.a.createElement("span",{className:"TrackListItem-artist"},a.originalTitle)),r.a.createElement(ct,{className:"TrackListItem-rating",value:a.userRating,maxValue:10,onRate:o}),r.a.createElement(nt,{className:"TrackListItem-duration",value:null!=i?i:a.duration,onClick:s})))});var dt=function(e){var t=e.index,a=e.style;return r.a.createElement("button",{className:"TrackListItem",style:a},r.a.createElement("div",{className:"TrackListItem-contents"},r.a.createElement("span",{className:"TrackListItem-index"},t),r.a.createElement("span",{className:"TrackListItem-fulltitle"},r.a.createElement("span",{className:"TrackListItem-artist"},"Loading..."))))};a(748);function ht(e){var t=e.trackIds,a=e.values,n=e.style,c=t.map(function(e){return a.tracks.get(e)}).filter(function(e){return null!=e}).reduce(function(e,t){return t.duration+e},0);return r.a.createElement("div",{className:"TrackListSummary",style:n},"Tracks: ",t.length,", Total Time: ",r.a.createElement(nt,{value:c,format:"h [h] m [min] ss [sec]"}))}function ft(e){var t=e.children,a=e.layout,n=e.onLoad;return t({rowCount:a.reduce(function(e,t){return e+t.size},0),renderItem:function(t){for(var n=t.index,r=0,c=0;c<a.length;c+=1){var i=r+a[c].size;if(n>=r&&n<i){var l=n-r,o=a[c].items[l];return a[c].render(o,l)(t)}r=i}return console.error("Could not render item!",{props:e,layout:a}),!1},isRowLoaded:function(e){for(var t=e.index,n=0,r=0;r<a.length;r+=1){var c=n+a[r].size;if(t>=n&&t<c){var i=t-n;return null!=a[r].items[i]}n=c}return console.error("Could not detect if row is loaded!",{index:t,layout:a}),!1},onLoad:n})}ft.propTypes={children:P.a.func,layout:P.a.arrayOf(P.a.shape({size:P.a.number.isRequired,items:P.a.arrayOf(P.a.any).isRequired,render:P.a.func.isRequired})).isRequired,onLoad:P.a.func.isRequired};function pt(e){var t=e.trackIds,a=e.renderTrackItem,n=e.renderSummary,c=e.onLoadItems,i=[{size:t.length,items:t,render:a},{size:1,items:[!0],render:n}];return r.a.createElement(ft,{layout:i,onLoad:c},function(e){var t=e.rowCount,a=e.isRowLoaded,n=e.renderItem,c=e.onLoad;return r.a.createElement(et,{rowHeight:40,rowCount:t,renderItem:n,isRowLoaded:a,onLoad:c})})}pt.defaultProps={tracksIds:[]};var vt=G()(de()({currentlyPlayingTrackId:P.a.number,displayArtist:P.a.oneOfType([P.a.string,P.a.bool]),onRateTrack:P.a.func.isRequired,onSelectTrack:P.a.func.isRequired,playerState:P.a.string,preserveTrackIndex:P.a.bool}),F()({renderTrackItem:function(e){return function(t,a){return function(n){var c=n.key,i=n.style,l=e.values,o=e.preserveTrackIndex,s=e.currentlyPlayingTrackId,u=e.displayArtist,m=e.playerState,d=e.onRateTrack,h=e.onSelectTrack,f=l.tracks.get(t);return null==f?r.a.createElement(dt,{key:c,style:i,index:o?null:a+1}):r.a.createElement(mt,{key:c,style:i,track:f,index:o?f.index:a+1,playerState:m,currentlyPlaying:t===s,onRate:d,onSelect:h,displayArtist:u})}}},renderSummary:function(e){return function(){return function(t){var a=t.style,n=t.key,c=e.trackIds,i=e.values;return r.a.createElement(ht,{key:n,style:a,trackIds:c,values:i})}}}}))(pt);var yt=G()(de()({onNavigate:P.a.func.isRequired,onCreateQueue:P.a.func.isRequired}),F()({onClickSubtitle:function(e){return function(){var t=e.album;(0,e.onNavigate)(k.ARTIST,t.parentId)}},onSelectTrack:function(e){return function(t){var a=e.album;(0,e.onCreateQueue)(k.ALBUM,a.id,t.id)}}}))(function(e){var t=e.album,a=e.values,n=e.currentlyPlayingTrackId,c=e.playerState,i=e.onRateTrack,l=e.onLoadItems,o=e.onClickSubtitle,s=e.onSelectTrack,u=Object(_.a)(e,["album","values","currentlyPlayingTrackId","playerState","onRateTrack","onLoadItems","onClickSubtitle","onSelectTrack"]),m={thumb:t.thumb,title:t.title,subtitle:t.parentTitle,meta:null!=t.year?t.year.toString():""},d=a.albumTracks.get(t.id)||[];return r.a.createElement(Ze,Object.assign({},u,{details:m,onClickSubtitle:o}),r.a.createElement(vt,{displayArtist:t.parentTitle,currentlyPlayingTrackId:n,onLoadItems:l,onRateTrack:i,onSelectTrack:s,playerState:c,preserveTrackIndex:!0,trackIds:d,values:a}))});a(749);function bt(e){var t=e.album,a=e.style;return r.a.createElement("div",{style:a,className:"AlbumListHeader"},r.a.createElement(Je,{src:t.thumb}),r.a.createElement("div",{className:"AlbumListHeader-title"},t.title))}function kt(e){for(var t=e.albumIds,a=e.values,n=e.renderAlbumHeader,c=e.renderTrackItem,i=e.renderAlbumSummary,l=e.onLoadItems,o=[],s=0;s<t.length;s+=1){var u=t[s],m=a.albumTracks.get(u)||[];o.push({size:1,items:[u],render:n}),o.push({size:m.length,items:m,render:c})}return o.push({size:1,items:[!0],render:i}),r.a.createElement(ft,{layout:o,onLoad:l},function(e){var t=e.rowCount,a=e.isRowLoaded,n=e.renderItem,c=e.onLoad;return r.a.createElement(et,{rowHeight:40,rowCount:t,renderItem:n,isRowLoaded:a,onLoad:c})})}kt.defaultProps={albumIds:[]};var gt=G()(de()({displayArtist:P.a.bool,currentlyPlayingTrackId:P.a.number,onRateTrack:P.a.func.isRequired,onSelectTrack:P.a.func.isRequired}),F()({renderAlbumHeader:function(e){return function(t){return function(a){var n=a.key,c=a.style,i=e.values.albums.get(t);return r.a.createElement(bt,{key:n,style:c,album:i})}}},renderTrackItem:function(e){return function(t){return function(a){var n=a.key,c=a.style,i=e.values,l=e.displayArtist,o=e.currentlyPlayingTrackId,s=e.onRateTrack,u=e.onSelectTrack,m=i.tracks.get(t);return null==m?r.a.createElement(dt,{key:n,style:c}):r.a.createElement(mt,{key:n,style:c,track:m,index:m.index,currentlyPlaying:t===o,onRate:s,onSelect:u,displayArtist:l})}}},renderAlbumSummary:function(e){return function(){return function(t){var a=t.key,n=t.style,c=e.albumIds,i=e.values,l=c.map(function(e){return i.albumTracks.get(e)}).reduce(function(e,t){return e.concat(t)},[]);return r.a.createElement(ht,{key:a,style:n,trackIds:l,values:i})}}}}))(kt);var Et=G()(de()({onCreateQueue:P.a.func.isRequired}),F()({onSelectTrack:function(e){return function(t){var a=e.artist;(0,e.onCreateQueue)(k.ARTIST,a.id,t.id)}}}))(function(e){var t=e.artist,a=e.values,n=e.currentlyPlayingTrackId,c=e.onSelectTrack,i=e.onRateTrack,l=e.onLoadItems,o=Object(_.a)(e,["artist","values","currentlyPlayingTrackId","onSelectTrack","onRateTrack","onLoadItems"]),s={thumb:t.thumb,title:t.title,subtitle:t.genre.join(", "),meta:t.country.join(", ")},u=a.artistAlbums.get(t.id)||[];return r.a.createElement(Ze,Object.assign({},o,{details:s}),r.a.createElement(gt,{albumIds:u,values:a,currentlyPlayingTrackId:n,preserveTrackIndex:!0,onLoadItems:l,onRateTrack:i,onSelectTrack:c}))}),It=a(463),Tt=a.n(It),St=Ye(new it.SortableContainer(Tt()($e),{withRef:!0})),Ct=new it.SortableElement(mt);function Lt(e){var t=e.playlistItems,a=e.renderPlaylistItem,n=e.renderSummary,c=e.onLoadItems,i=e.onSort,l=[{size:t.length,items:t,render:a},{size:1,items:[!0],render:n}];return r.a.createElement(ft,{layout:l,onLoad:c},function(e){var t=e.rowCount,a=e.isRowLoaded,n=e.renderItem,c=e.onLoad;return r.a.createElement(St,{rowHeight:40,rowCount:t,renderItem:n,isRowLoaded:a,onLoad:c,onSortEnd:i,useDragHandle:!0,lockAxis:"y",helperClass:"TrackListItem-helper SortHandle-helper"})})}Lt.defaultProps={playlistItems:[]};var Pt=G()(de()({currentlyPlayingTrackId:P.a.number,displayArtist:P.a.oneOfType([P.a.string,P.a.bool]),onRateTrack:P.a.func.isRequired,onSelectTrack:P.a.func.isRequired,playerState:P.a.string,preserveTrackIndex:P.a.bool,useRelativeTime:P.a.bool}),Fe()("useRelativeTime","setUseRelativeTime",!1),F()({onClickTime:function(e){return function(t){t.stopPropagation();var a=e.useRelativeTime;(0,e.setUseRelativeTime)(!a)}}}),F()({renderPlaylistItem:function(e){return function(t,a){return function(n){var c=n.key,i=n.style,l=e.values,o=e.currentlyPlayingTrackId,s=e.playlistItems,u=e.playerState,m=e.useRelativeTime,d=e.onClickTime,h=e.onRateTrack,f=e.onSelectTrack,p=t&&l.tracks.get(t.track);if(null==t||null==p)return r.a.createElement(dt,{key:c,index:a+1,style:i});var v=null;return m&&(v=s.slice(0,a).reduce(function(e,t){return e+l.tracks.get(t.track).duration},0)),r.a.createElement(Ct,{displayArtist:!0,sortable:!0,key:c,style:i,track:p,trackIndex:a+1,context:{playlistItem:t},index:a,relativeTrackStartTime:v,playerState:u,currentlyPlaying:t.trackId===o,onRate:h,onSelect:f,onClickTime:d})}}},renderSummary:function(e){return function(){return function(t){var a=t.style,n=t.key,c=e.playlistItems,i=e.values,l=c.map(function(e){return e&&e.track});return r.a.createElement(ht,{key:n,style:a,trackIds:l,values:i})}}}}))(Lt);var Ot=G()(de()({onCreateQueue:P.a.func.isRequired}),F()({onSelectTrack:function(e){return function(t){var a=e.playlist;(0,e.onCreateQueue)(k.PLAYLIST,a.id,t.id)}},onSort:function(e){return function(t){var a=t.newIndex,n=t.oldIndex,r=e.playlist;(0,e.onMovePlaylistItem)({playlistId:r.id,newIndex:a,oldIndex:n})}}}))(function(e){var t=e.playlist,a=e.values,n=e.currentlyPlayingTrackId,c=e.playerState,i=e.onSelectTrack,l=e.onLoadItems,o=e.onRateTrack,s=e.onSort,u=Object(_.a)(e,["playlist","values","currentlyPlayingTrackId","playerState","onSelectTrack","onLoadItems","onRateTrack","onSort"]),m={thumb:t.composite,title:t.title,subtitle:t.smart?"Smart Playlist":"Playlist",meta:"".concat(t.leafCount," items")},d=a.playlistItems.get(t.id)||[];return r.a.createElement(Ze,Object.assign({},u,{details:m}),r.a.createElement(Pt,{currentlyPlayingTrackId:n,onLoadItems:l,onRateTrack:o,onSelectTrack:i,onSort:s,playerState:c,playlistItems:d,values:a}))});function Rt(e){var t=e.item,a=Object(_.a)(e,["item"]);return r.a.createElement(ge,{item:t,components:{album:function(e){return r.a.createElement(yt,Object.assign({},a,{album:e}))},artist:function(e){return r.a.createElement(Et,Object.assign({},a,{artist:e}))},playlist:function(e){return r.a.createElement(Ot,Object.assign({},a,{playlist:e}))}}})}a(752);var wt=a(464),Nt=a.n(wt),At=(a(753),function(e){function t(){var e;return Object(E.a)(this,t),(e=Object(T.a)(this,Object(S.a)(t).call(this))).state={displayInput:!1},e.handleBlur=e.handleBlur.bind(Object(xe.a)(e)),e.handleChange=Nt()(e.handleChange.bind(Object(xe.a)(e)),500),e.handleClick=e.handleClick.bind(Object(xe.a)(e)),e}return Object(C.a)(t,e),Object(I.a)(t,[{key:"handleClick",value:function(e){var t=this.props.onClick;return this.setState({displayInput:!0}),this.input.focus(),t(e)}},{key:"handleBlur",value:function(e){return e.stopPropagation(),this.setState({displayInput:!1}),!0}},{key:"handleChange",value:function(){return(0,this.props.onChange)(this.input.value)}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.query,c=this.state.displayInput;return r.a.createElement("button",{className:J()(a,"SearchBar"),onClick:this.handleClick},r.a.createElement("div",{className:"SearchBar-contents"},r.a.createElement(X,{className:"SearchBar-icon",icon:"search"}),r.a.createElement("div",{className:J()("SearchBar-inputWrapper",{"SearchBar-inputWrapper_closed":!c})},r.a.createElement("input",{ref:function(t){e.input=t},className:"SearchBar-input",placeholder:"Search...",onBlur:this.handleBlur,onChange:this.handleChange,value:n}))))}}]),t}(n.Component));At.defaultProps={onClick:ke.a,onChange:ke.a};var jt=a(465),xt=a.n(jt);a(754),a(755);var Bt=G()(F()({onClick:function(e){return function(){(0,e.onClick)(e.item)}}}))(function(e){var t=e.item,a=e.active,n=e.descending,c=e.onClick,i=J()("DropdownItem",{"DropdownItem-active":a});return r.a.createElement("li",{className:i},r.a.createElement("button",{className:"DropdownItem-button",onClick:c},t,a&&r.a.createElement(X,{icon:n?"down-open":"up-open"})))});var Mt=G()(xt()({onChange:ke.a}),Fe()("open","setOpen",!1),F()({onOpen:function(e){return function(){(0,e.setOpen)(!0)}},onClose:function(e){return function(){(0,e.setOpen)(!1)}},onToggle:function(e){return function(){var t=e.open;(0,e.setOpen)(!t)}},onChange:function(e){return function(t){var a=e.onChange,n=e.setOpen;a(t),n(!1)}}}))(function(e){var t=e.active,a=e.items,n=e.open,c=e.descending,i=e.onToggle,l=e.onChange,o=J()("Dropdown-menu",{"Dropdown-menu-open":n});return r.a.createElement("div",{className:"Dropdown"},r.a.createElement("button",{className:"Dropdown-button",onClick:i},r.a.createElement("span",{className:"Dropdown-button-text"},t),r.a.createElement(X,{icon:"down-dir",className:"Dropdown=button-icon"})),r.a.createElement("ul",{className:o},a.map(function(e){return r.a.createElement(Bt,{key:e,item:e,active:t===e,descending:c,onClick:l})})))});function Ht(e){var t=e.sections,a=e.currentSection,n=e.searchQuery,c=e.sortBy,i=e.sortDesc,l=e.sortOptions,o=e.onChangeSection,s=e.onChangeSearchQuery,u=e.onChangeSortBy,m=e.onRefreshSection,d=r.a.createElement(At,{key:k.SEARCH,className:J()({"NavBar-section-item":!0,"NavBar-section-item-selected":a===k.SEARCH}),query:n,onClick:function(){return o(k.SEARCH)},onChange:s});return r.a.createElement("header",{className:"NavBar"},r.a.createElement("nav",{className:"NavBar-section-list"},Object.keys(t).map(function(e){return e===k.SEARCH?d:r.a.createElement("button",{key:e,className:J()({"NavBar-section-item":!0,"NavBar-section-item-selected":e===a}),onMouseDown:function(){return o(e)}},t[e])})),r.a.createElement("nav",{className:"NavBar-section-list"},l.length>0&&r.a.createElement(Mt,{active:c,descending:i,items:l,onChange:u}),r.a.createElement(K.a,{to:"/settings",className:"NavBar-section-item"},r.a.createElement(X,{icon:"cog"})),r.a.createElement(X,{icon:"cw",className:"NavBar-section-item",onClick:m})))}Ht.defaultProps={onChangeSection:ke.a,onChangeSearchQuery:ke.a,onChangeSortBy:ke.a,onRefreshSection:ke.a};a(756),a(757);var Dt=qe()(function(e){var t=e.itemWidth,a=e.items,n=e.style,c=e.rowOffset,i=e.renderFn;return r.a.createElement("div",{className:"Grid-row",style:n},r.a.createElement("div",{className:"Grid-rowItems",style:{marginLeft:"".concat(c,"px")}},a.map(function(e,a){return r.a.createElement("div",{key:a,className:"Grid-item",style:{width:"".concat(t,"px"),minWidth:"".concat(t,"px")}},i(e))})))});var qt=qe()(function(e){var t=e.style,a=e.rowOffset,n=e.section,c=e.renderFn;return r.a.createElement("div",{className:"GridListRowHeader",style:t},r.a.createElement("div",{className:"GridListRowHeader-content",style:{marginLeft:"".concat(a,"px")}},c(n)))}),Ut=He()(),Qt=function(e){function t(){var e;return Object(E.a)(this,t),(e=Object(T.a)(this,Object(S.a)(t).call(this))).handleLoadMoreRows=e.handleLoadMoreRows.bind(Object(xe.a)(e)),e}return Object(C.a)(t,e),Object(I.a)(t,[{key:"componentDidUpdate",value:function(e){e.width!==this.props.width&&this.list.recomputeRowHeights()}},{key:"calcRows",value:function(){var e=this.props,t=e.sections,a=e.getItemHeight,n=e.itemsPerRow,r=e.width,c=e.paddingHorizontal,i=e.renderItem,l=e.renderHeader,o=r-Ut-2*c,s=Math.floor(o/n),m=a(s),d=(r-Ut)%s/2,h=function(e){return{Component:Dt,props:{renderFn:i,items:e,itemWidth:s,rowOffset:d},height:m,isLoaded:e.every(function(e){return null!=e})}},f=function(e){return function(e){return e.reduce(function(e,t,a){return a%n===0&&e.push([]),e[e.length-1].push(t),e},[])}(e).map(h)};return t.reduce(function(e,t){var a=f(t.items);return[].concat(Object(u.a)(e),[{Component:qt,props:{renderFn:l,section:t,rowOffset:d},height:50,isLoaded:!0}],Object(u.a)(a))},[])}},{key:"calcRowCount",value:function(){var e=this.props,t=e.sections,a=e.itemsPerRow;return t.reduce(function(e,t){var n=null!=t.total?t.total:t.items.length;return e+Math.ceil(n/a)+1},0)}},{key:"handleLoadMoreRows",value:function(e){var t=e.startIndex,a=e.stopIndex,n=this.props,r=n.onLoad,c=n.itemsPerRow;return r(t*c,(a+1)*c)}},{key:"render",value:function(){var e=this,t=this.props,a=t.width,n=t.height,c=t.className,i=this.calcRows(),l=this.calcRowCount(),o=function(e){var t=e.index,a=e.key,n=e.style,c=i[t];return r.a.createElement(c.Component,Object.assign({},c.props,{key:a,style:n}))},s=function(e){var t=e.index;return i[t].height};return r.a.createElement("div",{className:J()(c,"GridList")},r.a.createElement(Be.c,{isRowLoaded:function(e){var t=e.index,a=i[t];return null!=a&&a.isLoaded},loadMoreRows:this.handleLoadMoreRows,rowCount:l},function(t){var c=t.onRowsRendered,i=t.registerChild;return r.a.createElement(Be.d,{width:a,height:n,onRowsRendered:c,ref:function(t){e.list=t,i(t)},rowCount:l,rowHeight:s,rowRenderer:o,style:{overflowX:"hidden"}})}))}}]),t}(n.Component);Qt.defaultProps={itemsPerRow:5,getItemHeight:function(e){return e},paddingHorizontal:0};var Gt=Ye(Qt);function Yt(e){var t=e.hubs,a=e.onChange,n=Object(_.a)(e,["hubs","onChange"]);return r.a.createElement(Gt,Object.assign({},n,{itemsPerRow:6,getItemHeight:function(e){return e+50},paddingHorizontal:5,renderItem:function(e){return r.a.createElement(je,{item:e,onSelect:a})},renderHeader:function(e){return r.a.createElement("div",{className:"SearchResults-header"},e.title)},sections:t.filter(function(e){return e.items.length})}))}Yt.defaultProps={onChange:ke.a};a(758);var Wt=function(e){var t=e.key,a=e.rowData;return r.a.createElement(ue.b,{key:t,id:he,track:a,collect:function(e){return e}},Object(Be.f)(e))},zt=function(e){var t=e.tracks,a=e.onLoad,n=e.onChange,c=e.onRate;return r.a.createElement(Be.a,null,function(e){var i=e.width,l=e.height;return r.a.createElement(Be.c,{isRowLoaded:function(e){var a=e.index;return null!=t[a]},loadMoreRows:function(e){var t=e.startIndex,n=e.stopIndex;return a(t,n+1)},rowCount:t.length},function(e){var a=e.onRowsRendered,o=e.registerChild;return r.a.createElement(Be.e,{width:i,height:l,headerHeight:40,headerClassName:"TrackTable-headerColumn",rowCount:t.length,rowGetter:function(e){var a=e.index;return t[a]||{}},rowHeight:40,rowClassName:function(e){var t=e.index;return t<0?"TrackTable-headerRow":t%2===0?"TrackTable-row TrackTable-evenRow":"TrackTable-row TrackTable-oddRow"},rowRenderer:Wt,onRowsRendered:a,onRowClick:function(e){var t=e.rowData;return n(k.TRACK,t.id)},ref:o},r.a.createElement(Be.b,{dataKey:"title",label:"Title",width:200}),r.a.createElement(Be.b,{label:"Album Artist",dataKey:"grandparentTitle",width:200}),r.a.createElement(Be.b,{label:"Artist",dataKey:"originalTitle",width:200}),r.a.createElement(Be.b,{label:"Album",dataKey:"parentTitle",width:200}),r.a.createElement(Be.b,{label:"Rating",dataKey:"userRating",width:100,cellRenderer:function(e){var t=e.rowData,a=e.cellData;return r.a.createElement(ct,{className:"TrackTable-rating",value:a,maxValue:10,onRate:function(e){return c(t.id,e)}})}}),r.a.createElement(Be.b,{label:"Duration",dataKey:"duration",width:100,cellRenderer:function(e){var t=e.cellData;return r.a.createElement(nt,{value:t})}}),r.a.createElement(Be.b,{label:"Plays",dataKey:"viewCount",width:50}),r.a.createElement(Be.b,{label:"Date Added",dataKey:"addedAt",width:150,cellRenderer:function(e){var t=e.cellData;return t&&at()(1e3*t).format("MMMM Do, YYYY")}}),r.a.createElement(Be.b,{label:"Bitrate",dataKey:"bitrate",cellDataGetter:function(e){var t=e.rowData;return t.media&&t.media[0].bitrate},width:50}))})})},Ft=a(73),Kt=a(106),_t=function(e){var t=e.value,a=e.onChange,n=e.options;return r.a.createElement("select",{value:t,onChange:a},Object.keys(n).map(function(e){return r.a.createElement("option",{key:e,value:e},n[e])}))},Vt=(a(759),function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"text",className:"Input-input",value:t[0],onChange:function(e){return a([e.target.value])}})}),Jt=function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"number",className:"Input-input",value:t[0],onChange:function(e){return a([parseInt(e.target.value,10)])}})},Xt=function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"date",className:"Input-input",value:at.a.unix(t[0]).format("YYYY-MM-DD"),onChange:function(e){return a([at()(e.target.value).unix()])}})},Zt=function(e){var t=e.value,a=e.onChange;return r.a.createElement("div",null,r.a.createElement("input",{type:"number",className:"Input-input",value:t[0],onChange:function(e){return a([e.target.value,t[1]])}}),r.a.createElement(_t,{value:t[1],onChange:function(e){return a([t[0],e.target.value])},options:Ft.filter.availableDateUnits}))},$t=function(e){var t=e.operator,a={value:e.value,onChange:e.onChange};switch(t){case"isBefore":case"isAfter":return r.a.createElement(Xt,a);case"inTheLast":case"inNotTheLast":return r.a.createElement(Zt,a);case"isGreaterThan":case"isLessThan":return r.a.createElement(Jt,a);case"is":case"isNot":case"contains":case"doesNotContain":case"beginsWith":case"endsWith":default:return r.a.createElement(Vt,a)}},ea=(a(760),Object(Kt.a)(Object(Kt.d)("property","setProperty","artistTitle"),Object(Kt.d)("operator","setOperator","is"),Object(Kt.d)("value","setValue",["",""]),Object(Kt.b)({setProperty:P.a.func.isRequired,setOperator:P.a.func.isRequired}),Object(Kt.c)({onPropertyChange:function(e){return function(t){var a=e.setProperty,n=e.setOperator,r=e.operator,c=t.target.value;a(c);var i=Ft.filter[c].options();!1===Object.hasOwnProperty.call(i,r)&&n(Object.keys(i)[0])}},onOperatorChange:function(e){return function(t){(0,e.setOperator)(t.target.value)}},onValueChange:function(e){return function(t){(0,e.setValue)(t)}},onSave:function(e){return function(){var t,a=e.onChange,n=e.property,r=e.operator,c=e.value;a((t=Ft.filter[n])[r].apply(t,Object(u.a)(c)))}}}))(function(e){var t,a=e.property,n=e.operator,c=e.value,i=e.onPropertyChange,l=e.onOperatorChange,o=e.onValueChange,s=e.onSave,m=Ft.filter.availableTrackOptions,d=Ft.filter[a].options();return r.a.createElement("div",{className:"Filters"},r.a.createElement(_t,{value:a,onChange:i,options:m}),r.a.createElement(_t,{value:n,onChange:l,options:d}),r.a.createElement($t,{operator:n,value:c,onChange:o}),r.a.createElement("p",null,JSON.stringify((t=Ft.filter[a])[n].apply(t,Object(u.a)(c)))),r.a.createElement("button",{onClick:s},"Save"))})),ta=(a(761),function(e){var t=e.tracks,a=e.onLoad,n=e.onRate,c=e.onChange,i=e.onFilter;return r.a.createElement("div",{className:"TracksSection-container"},r.a.createElement(ea,{onChange:i}),r.a.createElement(zt,{tracks:t,onLoad:a,onChange:c,onRate:n}))});function aa(e){var t,a=e.className,n=e.section,c=e.values,i=e.sectionItems,l=e.navBarSections,o=e.currentlyPlayingTrackId,s=e.playerState,u=e.item,m=e.onChangeItem,d=e.onLoadItems,h=e.onLoadItemChildren,f=e.sortBy,p=e.sortDesc,v=e.sortOptions,y=e.onMovePlaylistItem,b=e.onEditItem,g=e.onRefreshItem,E=e.onRefreshSection,I=e.onChangeSection,T=e.onRateTrack,S=e.onChangeSortBy,C=e.onFilterSection,L=e.searchQuery,P=e.onChangeSearchQuery,O=e.onCreateQueue;switch(n){case k.SEARCH:t=r.a.createElement(Yt,{query:L,hubs:i,onChange:m});break;case k.TRACK:t=r.a.createElement(ta,{tracks:i,onChange:m,onLoad:function(e,t){return d(n,e,t)},onRate:T,onFilter:C});break;default:t=r.a.createElement(Ve,{size:150,items:i,onChange:m,onLoad:function(e,t){return d(n,e,t)}})}return r.a.createElement("div",{className:J()(a,"Browser")},r.a.createElement("div",{className:"Browser-grid"},r.a.createElement(Ht,{sections:l,currentSection:n,searchQuery:L,sortBy:f,sortDesc:p,sortOptions:v,onChangeSection:I,onChangeSearchQuery:P,onChangeSortBy:S,onRefreshSection:E}),r.a.createElement("div",{className:"Browser-grid-wrapper"},t)),u&&r.a.createElement(Rt,{className:"Browser-selected-panel",item:u,values:c,playerState:s,currentlyPlayingTrackId:o,onClose:function(){return m(null)},onRefresh:g,onRateTrack:T,onNavigate:m,onEdit:b,onCreateQueue:O,onLoadItems:function(e,t){return h(u,e,t)},onMovePlaylistItem:y}))}aa.defaultProps={onChangeItem:ke.a,onChangeSearchQuery:ke.a,onChangeSection:ke.a};var na=F()({onChangeItem:function(e){return function(t,a){var n=e.onChangeItem,r=e.onCreateQueue;return t===k.TRACK?r(t,a):n(t,a)}}})(aa),ra=function(e,t){var a=t.dispatch,n=t.onChangeSection,r=t.onLoadItems,c=t.section,i=t.itemId,l=t.itemType,o=e.section,s=e.itemId,u=e.itemType;if(null==c?n(k.ALBUM):o!==c&&r(c,0,30),u!==l||s!==i)switch(l){case k.ALBUM:a(Object(k.fetchAlbum)(i)),a(Object(k.fetchAlbumTracks)(i,0,15));break;case k.ARTIST:a(Object(k.fetchArtist)(i)),a(Object(k.fetchArtistAlbums)(i,0,100)).then(function(e){var t=e();k.selectAllArtistAlbums.values(t).get(i).forEach(function(e){return a(Object(k.fetchAlbumTracks)(e,0,100))})});break;case k.PLAYLIST:a(Object(k.fetchPlaylistItems)(i,0,15))}};var ca=function(e){return function(t,a,n){var r=e.dispatch;switch(t){case k.ALBUM:return r(Object(k.fetchCurrentLibraryAlbumsRange)(a,n));case k.ARTIST:return r(Object(k.fetchCurrentLibraryArtistsRange)(a,n));case k.PLAYLIST:return r(Object(k.fetchCurrentLibraryPlaylistsRange)(a,n));case k.TRACK:return r(Object(k.fetchCurrentLibraryTracksRange)(a,n));case k.SEARCH:return;default:console.error("Could not load items for section: ".concat(t))}}},ia=G()(Object(l.b)(function(e,t){var a,n,r;switch(t.section){case k.ALBUM:a=k.selectLibraryAlbums.sortBy(e),n=k.selectLibraryAlbums.sortDesc(e),r=k.selectLibraryAlbums.sortOptions(e);break;case k.ARTIST:a=k.selectLibraryArtists.sortBy(e),n=k.selectLibraryArtists.sortDesc(e),r=k.selectLibraryArtists.sortOptions(e);break;case k.PLAYLIST:a=k.selectLibraryPlaylists.sortBy(e),n=k.selectLibraryPlaylists.sortDesc(e),r=k.selectLibraryPlaylists.sortOptions(e);break;case k.TRACK:a=k.selectLibraryTracks.sortBy(e),n=k.selectLibraryTracks.sortDesc(e),r=k.selectLibraryTracks.sortOptions(e);break;default:a=null,n=!1,r=[]}return{trackId:k.selectQueue.trackId(e),libraryAlbumIds:k.selectLibraryAlbums.currentIds(e),libraryArtistIds:k.selectLibraryArtists.currentIds(e),libraryPlaylistIds:k.selectLibraryPlaylists.currentIds(e),libraryTrackIds:k.selectLibraryTracks.currentIds(e),playerState:k.selectTimeline.playerState(e),allAlbums:k.selectAllAlbums.values(e),allArtists:k.selectAllArtists.values(e),allArtistAlbums:k.selectAllArtistAlbums.values(e),allPlaylists:k.selectAllPlaylists.values(e),allPlaylistItems:k.selectAllPlaylistItems.values(e),allTracks:k.selectAllTracks.values(e),allAlbumTracks:k.selectAllAlbumTracks.values(e),sortBy:a,sortDesc:n,sortOptions:r,searchResults:[{title:"Albums",items:k.selectSearch.albums(e)},{title:"Artists",items:k.selectSearch.artists(e)},{title:"Playlists",items:k.selectSearch.playlists(e)},{title:"Tracks",items:k.selectSearch.tracks(e)}]}}),F()({onLoadItems:ca,onMovePlaylistItem:function(e){return function(t){var a=t.playlistId,n=t.newIndex,r=t.oldIndex;(0,e.dispatch)(Object(k.movePlaylistItem)({playlistId:a,newIndex:n,oldIndex:r}))}},onLoadItemChildren:function(e){return function(t,a,n){var r=e.dispatch;switch(t._type){case k.ALBUM:r(Object(k.fetchAlbumTracks)(t.id,a,n));break;case k.PLAYLIST:r(Object(k.fetchPlaylistItems)(t.id,a,n))}}},onRateTrack:function(e){return function(t,a){(0,e.dispatch)(Object(k.rateTrack)(t,a))}},onFilterSection:function(e){return function(t){var a=e.dispatch;a(Object(k.filterLibraryTracks)(t)),a(Object(k.fetchCurrentLibraryTracksRange)(0,30))}},onCreateQueue:function(e){return function(t,a,n){var r=e.dispatch;switch(t){case k.ALBUM:r(Object(k.createQueueFromAlbum)(a,n));break;case k.ARTIST:r(Object(k.createQueueFromArtist)(a,n));break;case k.PLAYLIST:r(Object(k.createQueueFromPlaylist)(a,n));break;case k.TRACK:r(Object(k.createQueueFromTrack)(a));break;default:console.warn("Could not create queue",{parentType:t,parentId:a,trackId:n})}}},onChangeSearchQuery:function(e){return function(t){(0,e.dispatch)(Object(k.fetchSearchResults)(t,10))}},onChangeSortBy:function(e){return function(t){var a=e.section,n=e.dispatch,r=e.sortBy,c=e.sortDesc,i=t===r&&!c;switch(a){case k.ALBUM:n(Object(k.sortLibraryAlbums)(t,i));break;case k.ARTIST:n(Object(k.sortLibraryArtists)(t,i));break;case k.PLAYLIST:n(Object(k.sortLibraryPlaylists)(t,i));break;case k.TRACK:n(Object(k.sortLibraryTracks)(t,i));break;default:console.error("Could not sort based on section:",a)}ca(e)(a,0,30)}},onEditItem:function(e){return Object(A.a)(N.a.mark(function t(){var a,n,r,c,i,l;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.dispatch,n=e.itemType,r=e.itemId,c=e.allPlaylists,t.t0=n,t.next=t.t0===k.PLAYLIST?4:12;break;case 4:if(i=c.get(r),null==(l=window.prompt("Enter new playlist title",i.title))){t.next=11;break}return t.next=9,a(Object(k.setPlaylistTitle)(r,l));case 9:return t.next=11,a(Object(k.forceFetchPlaylist)(r));case 11:return t.abrupt("break",13);case 12:console.error("Could not edit based on item type:",n);case 13:case"end":return t.stop()}},t)}))},onRefreshItem:function(e){return Object(A.a)(N.a.mark(function t(){var a,n,r;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.dispatch,n=e.itemType,r=e.itemId,t.t0=n,t.next=t.t0===k.ALBUM?4:t.t0===k.ARTIST?8:t.t0===k.PLAYLIST?12:16;break;case 4:return t.next=6,a(Object(k.resetAlbumTracks)(r));case 6:return a(Object(k.fetchAlbumTracks)(r,0,15)),t.abrupt("break",17);case 8:return t.next=10,a(Object(k.resetArtistAlbums)(r));case 10:return a(Object(k.fetchArtistAlbums)(r,0,15)),t.abrupt("break",17);case 12:return t.next=14,a(Object(k.resetPlaylistItems)(r));case 14:return a(Object(k.fetchPlaylistItems)(r,0,15)),t.abrupt("break",17);case 16:console.error("Could not refresh based on item type:",n);case 17:case"end":return t.stop()}},t)}))},onRefreshSection:function(e){return Object(A.a)(N.a.mark(function t(){var a,n;return N.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.dispatch,n=e.section,t.t0=n,t.next=t.t0===k.ALBUM?4:t.t0===k.ARTIST?8:t.t0===k.PLAYLIST?12:t.t0===k.TRACK?16:20;break;case 4:return t.next=6,a(Object(k.resetCurrentLibraryAlbums)(n));case 6:return a(Object(k.fetchCurrentLibraryAlbumsRange)(0,30)),t.abrupt("break",21);case 8:return t.next=10,a(Object(k.resetCurrentLibraryArtists)(n));case 10:return a(Object(k.fetchCurrentLibraryArtistsRange)(0,30)),t.abrupt("break",21);case 12:return t.next=14,a(Object(k.resetCurrentLibraryPlaylists)(n));case 14:return a(Object(k.fetchCurrentLibraryPlaylistsRange)(0,30)),t.abrupt("break",21);case 16:return t.next=18,a(Object(k.resetCurrentLibraryTracks)(n));case 18:return a(Object(k.fetchCurrentLibraryTracksRange)(0,30)),t.abrupt("break",21);case 20:console.error("Could not refresh based on section type",n);case 21:case"end":return t.stop()}},t)}))}}),W()({componentWillMount:function(){ra({},this.props)},componentWillReceiveProps:function(e){ra(this.props,e)}}))(function(e){var t,a=e.section,n=e.itemType,c=e.itemId,i=e.searchResults,l=e.onChangeSearchQuery,o=e.libraryAlbumIds,s=e.libraryArtistIds,u=e.libraryPlaylistIds,m=e.libraryTrackIds,d=e.allAlbums,h=e.allArtists,f=e.allPlaylists,p=e.allTracks,v=e.allArtistAlbums,y=e.allAlbumTracks,b=e.allPlaylistItems,g=e.playerState,E=e.onEditItem,I=e.onRefreshItem,T=e.onRefreshSection,S=e.onChangeItem,C=e.onChangeSection,L=e.onLoadItems,P=e.onLoadItemChildren,O=e.sortBy,R=e.sortDesc,w=e.sortOptions,N=e.onChangeSortBy,A=e.onRateTrack,j=e.onFilterSection,x=e.onMovePlaylistItem,B=e.trackId,M=e.onCreateQueue,H=null;switch(n){case null:H=null;break;case k.ARTIST:H=h.get(c);break;case k.ALBUM:H=d.get(c);break;case k.PLAYLIST:H=f.get(c);break;default:console.error("Cannot set item based on itemType:",n),H=null}var D=null;switch(a){case k.SEARCH:D=i;break;case k.ALBUM:D=o.map(function(e){return d.get(e)});break;case k.ARTIST:D=s.map(function(e){return h.get(e)});break;case k.PLAYLIST:D=u.map(function(e){return f.get(e)});break;case k.TRACK:D=m.map(function(e){return p.get(e)});break;default:console.error("Cannot set sectionItems based on section:",a),D=[]}return r.a.createElement(na,{item:H,section:a,sectionItems:D,currentlyPlayingTrackId:B,sortBy:O,sortDesc:R,sortOptions:w,values:{albums:d,artists:h,artistAlbums:v,playlists:f,playlistItems:b,tracks:p,albumTracks:y},navBarSections:(t={},Object(ye.a)(t,k.SEARCH,"Search"),Object(ye.a)(t,k.ALBUM,"Albums"),Object(ye.a)(t,k.ARTIST,"Artists"),Object(ye.a)(t,k.PLAYLIST,"Playlists"),Object(ye.a)(t,k.TRACK,"Tracks"),t),playerState:g,onEditItem:E,onRefreshItem:I,onRefreshSection:T,onChangeItem:S,onChangeSection:C,onCreateQueue:M,onLoadItems:L,onMovePlaylistItem:x,onLoadItemChildren:P,onRateTrack:A,onFilterSection:j,onChangeSearchQuery:l,onChangeSortBy:N})}),la=a(467),oa=a.n(la),sa=a(468),ua=a.n(sa),ma=new window.AudioContext,da=function(e){function t(){var e;return Object(E.a)(this,t),(e=Object(T.a)(this,Object(S.a)(t).call(this))).state={buffered:0,currentTime:0,duration:0},e.audio=new ua.a({context:ma}),e.handleAudioDurationChange=e.handleAudioDurationChange.bind(Object(xe.a)(e)),e.handleAudioEnded=e.handleAudioEnded.bind(Object(xe.a)(e)),e.handleAudioProgress=e.handleAudioProgress.bind(Object(xe.a)(e)),e.handleAudioTimeUpdate=e.handleAudioTimeUpdate.bind(Object(xe.a)(e)),e}return Object(C.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.audio.audioElement.addEventListener("durationchange",this.handleAudioDurationChange),this.audio.audioElement.addEventListener("ended",this.handleAudioEnded),this.audio.audioElement.addEventListener("progress",this.handleAudioProgress),this.audio.audioElement.addEventListener("timeupdate",this.handleAudioTimeUpdate),this.receiveProps({},this.props)}},{key:"componentWillReceiveProps",value:function(e){this.receiveProps(this.props,e)}},{key:"componentWillUnmount",value:function(){this.audio.audioElement.removeEventListener("durationchange",this.handleAudioDurationChange),this.audio.audioElement.removeEventListener("ended",this.handleAudioEnded),this.audio.audioElement.removeEventListener("pause",this.handleAudioPause),this.audio.audioElement.removeEventListener("progress",this.handleAudioProgress),this.audio.audioElement.removeEventListener("timeupdate",this.handleAudioTimeUpdate),this.audio.stop()}},{key:"receiveProps",value:function(e,t){var a=t.source,n=t.playerState,r=e.source,c=e.playerState;if(a!==r&&(this.updateSource(a),n===k.PLAYER_STATE_PLAYING&&this.handlePlay()),n!==c)switch(n){case k.PLAYER_STATE_PAUSED:this.handlePause();break;case k.PLAYER_STATE_PLAYING:this.handlePlay();break;case k.PLAYER_STATE_STOPPED:this.handleStop();break;default:console.error("Could not handle playerState:",n)}}},{key:"handleAudioDurationChange",value:function(){var e=this.audio.duration();this.setState({duration:e}),this.props.onDurationChange(e)}},{key:"handleAudioEnded",value:function(){this.props.onEnd()}},{key:"handleAudioProgress",value:function(){var e=this.audio.buffered();this.setState({buffered:e}),this.props.onProgress(e)}},{key:"handleAudioTimeUpdate",value:function(){var e=this.audio.currentTime();this.setState({currentTime:e}),this.props.onTimeUpdate(e)}},{key:"updateSource",value:function(e){this.audio.loadSource(e)}},{key:"handlePlay",value:function(){this.audio.play()}},{key:"handlePause",value:function(){this.audio.pause()}},{key:"handleStop",value:function(){this.audio.stop()}},{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.duration,r=e({buffered:t.buffered,currentTime:t.currentTime,duration:a});return n.Children.only(r)}}]),t}(n.Component);da.defaultProps={onDurationChange:ke.a,onEnd:ke.a,onProgress:ke.a,onTimeUpdate:ke.a};a(763),a(764);function ha(e){var t=e.buffered,a=e.currentTime,n=e.duration;return r.a.createElement("div",{className:"Timeline"},r.a.createElement("div",{className:"Timeline-timestamp Timeline-currentTime"},r.a.createElement(nt,{value:a,unit:"s",trim:!1})),r.a.createElement("div",{className:"Timeline-track"},r.a.createElement("div",{className:"Timeline-trackBar Timeline-trackBuffered",style:{width:"".concat(t/n*100,"%")}}),r.a.createElement("div",{className:"Timeline-trackBar Timeline-trackCurrentTime",style:{width:"".concat(a/n*100,"%")}})),r.a.createElement("div",{className:"Timeline-timestamp Timeline-duration"},r.a.createElement(nt,{value:n,unit:"s",trim:!1})))}var fa=a(469),pa=a.n(fa);a(765);function va(e){var t=e.className,a=e.value,n=e.maxValue,c=e.onRate;return r.a.createElement(pa.a,{className:J()(t,"RatingStars"),start:0,stop:n/2,initialRating:a/2,fractions:2,onChange:function(e){return c(2*e)},emptySymbol:r.a.createElement(X,{icon:"star",className:"RatingStars-empty"}),fullSymbol:r.a.createElement(X,{icon:"star",className:"RatingStars-full"})})}va.defaultProps={value:0,maxValue:10};var ya=G()(de()({onNavigate:P.a.func.isRequired}),F()({onGoToArtist:function(e){return function(){var t=e.track;(0,e.onNavigate)(k.ARTIST,t.grandparentId)}},onGoToAlbum:function(e){return function(){var t=e.track;(0,e.onNavigate)(k.ALBUM,t.parentId)}}}))(function(e){var t=e.audio,a=e.track,n=e.paused,c=e.shuffled,i=e.onStop,l=e.onPrev,o=e.onPlay,s=e.onPause,u=e.onNext,m=e.onPlayer,d=e.onRateTrack,h=e.onShuffle,f=e.fullScreenMode,p=e.onGoToArtist,v=e.onGoToAlbum;return r.a.createElement("div",{className:"Controls"},f||r.a.createElement(Je,{src:a.thumb}),r.a.createElement("div",{className:"Controls-contents"},r.a.createElement("div",{className:"Controls-playback"},r.a.createElement("button",{onClick:l,className:"Controls-playback-prev"},r.a.createElement(X,{icon:"to-start"})),r.a.createElement("button",{onClick:n?o:s,className:"Controls-playback-play"},r.a.createElement(X,{icon:n?"play":"pause"})),r.a.createElement("button",{onClick:u,className:"Controls-playback-next"},r.a.createElement(X,{icon:"to-end"})),r.a.createElement("button",{onClick:i,className:"Controls-playback-stop"},r.a.createElement(X,{icon:"stop"}))),r.a.createElement("div",{className:"Controls-centerBlock"},r.a.createElement("div",{className:"Controls-trackInfo"},r.a.createElement("button",{onClick:v,className:"Controls-trackInfo-title"},a.title),r.a.createElement("span",{className:"Controls-trackInfo-seperator"},"\u2014"),r.a.createElement("button",{onClick:p,className:"Controls-trackInfo-artist"},a.originalTitle)),r.a.createElement("div",{className:"Controls-timeline"},r.a.createElement("button",{onClick:h,className:J()("Controls-shuffle",{"Controls-shuffle_enabled":c})},r.a.createElement(X,{icon:"shuffle"})),r.a.createElement(ha,{buffered:t.buffered,currentTime:t.currentTime,duration:t.duration}),r.a.createElement(X,{icon:"cw",className:"Controls-repeat"}))),r.a.createElement(va,{className:"Controls-rating",value:a.userRating||0,maxValue:10,onRate:function(e){return d(a.id,e)}}),r.a.createElement("button",{className:"Controls-albumThumbButton",onClick:m},r.a.createElement(Ce,{className:"Controls-albumThumb",imageClassName:"Controls-albumThumbImage",src:a.thumb}))))}),ba=function(e){function t(){var e;return Object(E.a)(this,t),(e=Object(T.a)(this,Object(S.a)(t).call(this))).handleNextTrack=e.handleNextTrack.bind(Object(xe.a)(e)),e.handlePause=e.handlePause.bind(Object(xe.a)(e)),e.handlePlay=e.handlePlay.bind(Object(xe.a)(e)),e.handlePrevTrack=e.handlePrevTrack.bind(Object(xe.a)(e)),e.handlePlayer=e.handlePlayer.bind(Object(xe.a)(e)),e.handleRateTrack=e.handleRateTrack.bind(Object(xe.a)(e)),e.handleShuffle=e.handleShuffle.bind(Object(xe.a)(e)),e.handleStop=e.handleStop.bind(Object(xe.a)(e)),e.handleTimeUpdate=oa()(e.handleTimeUpdate.bind(Object(xe.a)(e)),1e3),e}return Object(C.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.dispatch,a=e.queueId;null!=a&&t(Object(k.fetchQueue)(a))}},{key:"componentWillReceiveProps",value:function(e){var t=e.dispatch,a=e.track,n=this.props.track,r=a&&a.id,c=n&&n.id;c!==r&&(null!=c&&t(Object(k.sendTimelineStop)(this.props.queueItem)),null!=r&&e.playerState===k.PLAYER_STATE_PLAYING&&t(Object(k.sendTimelinePlay)(e.queueItem)))}},{key:"handleNextTrack",value:function(){(0,this.props.dispatch)(Object(k.playNextTrack)())}},{key:"handlePrevTrack",value:function(){(0,this.props.dispatch)(Object(k.playPrevTrack)())}},{key:"handleRateTrack",value:function(e,t){(0,this.props.dispatch)(Object(k.rateTrack)(e,t))}},{key:"handleStop",value:function(){var e=this.props.dispatch;e(Object(k.stopQueue)()),e(Object(k.setDisplayPlayer)(!1))}},{key:"handlePause",value:function(){var e=this.props,t=e.dispatch,a=e.queueItem;t(Object(k.sendTimelinePause)(a))}},{key:"handlePlay",value:function(){var e=this.props,t=e.dispatch,a=e.queueItem;t(Object(k.sendTimelinePlay)(a))}},{key:"handleTimeUpdate",value:function(e){var t=this.props,a=t.dispatch,n=t.queueItem;null!=n&&a(Object(k.setPlayerCurrentTime)(n,Math.round(1e3*e)))}},{key:"handlePlayer",value:function(){(0,this.props.dispatch)(Object(k.toggleDisplayPlayer)())}},{key:"handleShuffle",value:function(){(0,this.props.dispatch)(Object(k.toggleShuffleQueue)())}},{key:"render",value:function(){var e=this,t=this.props,a=t.track,n=t.trackSrc,c=t.shuffled,i=t.playerState,l=t.fullScreenMode,o=t.onNavigate;return null==a?null:r.a.createElement(da,{duration:a.duration/1e3,onEnd:this.handleNextTrack,onTimeUpdate:this.handleTimeUpdate,playerState:i,source:n},function(t){return r.a.createElement(ya,{audio:t,onNext:e.handleNextTrack,onPause:e.handlePause,onPlay:e.handlePlay,onPrev:e.handlePrevTrack,onPlayer:e.handlePlayer,onRateTrack:e.handleRateTrack,onShuffle:e.handleShuffle,onStop:e.handleStop,paused:i===k.PLAYER_STATE_PAUSED,shuffled:c,track:a,fullScreenMode:l,onNavigate:o})})}}]),t}(n.Component),ka=Object(l.b)(function(e){return{queueId:k.selectQueue.queueId(e),queueItem:k.selectQueue.queueItem(e),track:k.selectQueue.track(e),trackSrc:k.selectQueue.trackSrc(e),shuffled:k.selectQueue.shuffled(e),playerState:k.selectTimeline.playerState(e),fullScreenMode:Object(k.selectDisplayPlayer)(e)}})(ba),ga=(a(766),a(767),new it.SortableElement(F()({onRate:function(e){return function(t){var a=e.track;(0,e.onRate)(a.id,t)}}})(function(e){var t=e.style,a=e.track,n=e.isSelected,c=e.onClick,i=e.onRate;return r.a.createElement("button",{style:t,className:J()("PlayerItem",{"PlayerItem-selected":n}),onClick:c},r.a.createElement("div",{className:"PlayerItem-text"},r.a.createElement("div",{className:"PlayerItem-title"},a.title),r.a.createElement("div",{className:"PlayerItem-artist"},a.grandparentTitle)),r.a.createElement(ct,{className:"PlayerItem-rating",value:a.userRating,maxValue:10,onRate:i}),r.a.createElement(nt,{className:"PlayerItem-time",value:a.duration}),r.a.createElement(lt,{className:"PlayerItem-sortHandle"}))})));function Ea(e){var t=e.className,a=e.selectedTrackId,n=e.items,c=e.values,i=e.onChange,l=e.onSort,o=e.onRateTrack;return r.a.createElement(St,{className:t,rowCount:n.length,renderItem:function(e){var t=e.key,l=e.style,s=e.index,u=n[s],m=c.tracks.get(u.track);return null==m?r.a.createElement("div",{key:t,style:l}):r.a.createElement(ga,{key:u.id||t,style:l,index:s,track:m,isSelected:a===u.track,onClick:function(){return i&&i(u)},onRate:o})},isRowLoaded:function(e){var t=e.index;return null!=n[t]},itemHeight:60,rowHeight:60,onSortEnd:l,useDragHandle:!0,lockAxis:"y",helperClass:"PlayerItem-helper SortHandle-helper",style:{paddingTop:"50px"}})}var Ia=function(e){var t=e.values,a=e.items,n=e.selectedTrackId,c=e.onChange,i=e.onSort,l=e.onRateTrack,o=t.tracks.get(n);return null==o?null:r.a.createElement("div",{className:"Player"},r.a.createElement(Je,{src:o.thumb}),r.a.createElement("div",{className:"Player-currentAlbum"},r.a.createElement(Ce,{className:"Player-albumThumb",imageClassName:"Player-albumThumbImage",src:o.thumb,size:640}),r.a.createElement("div",{className:"Player-albumTitle"},o.parentTitle),r.a.createElement("div",{className:"Player-artistTitle"},o.grandparentTitle)),r.a.createElement("div",{className:"Player-list"},r.a.createElement(Ea,{values:t,items:a,selectedTrackId:n,onChange:c,onSort:i,onRateTrack:l})))};var Ta=G()(Object(l.b)(function(e){return{values:{tracks:k.selectAllTracks.values(e)},items:k.selectQueue.items(e),selectedTrackId:k.selectQueue.trackId(e)}}),F()({onChange:function(e){return function(t){return(0,e.dispatch)(Object(k.playQueueItem)(t.id))}},onSort:function(e){return function(t){var a=t.newIndex,n=t.oldIndex;return(0,e.dispatch)(Object(k.moveQueueItem)({newIndex:a,oldIndex:n}))}},onRateTrack:function(e){return function(t,a){(0,e.dispatch)(Object(k.rateTrack)(t,a))}}}))(function(e){var t=e.items,a=e.values,n=e.selectedTrackId,c=e.onChange,i=e.onSort,l=e.onRateTrack;return r.a.createElement(Ia,{items:t,values:a,selectedTrackId:n,onChange:c,onSort:i,onRateTrack:l})}),Sa=(a(768),function(e){var t=e.children,a=e.onClose;return r.a.createElement("div",{className:"Modal"},r.a.createElement("button",{className:"Modal-overlay",onClick:a}),r.a.createElement("div",{className:"Modal-window"},r.a.createElement("div",{className:"Modal-content"},t)))});a(769);var Ca=F()({onSelect:function(e){return function(){var t=e.playlist;(0,e.onSelect)(t)}}})(function(e){var t=e.playlist,a=e.style,n=e.onSelect;return r.a.createElement("button",{className:"PlaylistListItem",style:a,onClick:n},r.a.createElement("div",{className:"PlaylistListItem-contents"},r.a.createElement(Ce,{className:"PlaylistListItem-image",src:t.composite,alt:t.title,size:100,quality:50}),r.a.createElement("span",{className:"PlaylistListItem-title"},t.title)))});function La(e){var t=e.playlistIds,a=e.renderPlaylistItem,n=e.onLoadItems,c=[{size:t.length,items:t,render:a}];return r.a.createElement(ft,{layout:c,onLoad:n},function(e){var t=e.rowCount,a=e.isRowLoaded,n=e.renderItem,c=e.onLoad;return r.a.createElement(et,{rowHeight:60,rowCount:t,renderItem:n,isRowLoaded:a,onLoad:c})})}La.defaultProps={playlistIds:[]};var Pa=G()(de()({values:P.a.shape({playlists:P.a.instanceOf(Map).isRequired}).isRequired,onSelectPlaylist:P.a.func.isRequired}),F()({renderPlaylistItem:function(e){return function(t){return function(a){var n=a.key,c=a.style,i=e.values,l=e.onSelectPlaylist,o=i.playlists.get(t);return null==o?r.a.createElement("div",{key:n,style:c}):r.a.createElement(Ca,{key:n,style:c,playlist:o,onSelect:l})}}}}))(La);var Oa=G()(Object(l.b)(function(e){return{trackToAddToPlaylist:Object(k.selectTrackToAddToPlaylist)(e),playlistIds:k.selectLibraryPlaylistsRegular.currentIds(e),values:{playlists:k.selectAllPlaylists.values(e)}}}),F()({onSelectPlaylist:function(e){return function(t){var a=e.dispatch,n=e.trackToAddToPlaylist;a(Object(k.addTrackToPlaylist)(n,t.id)),a(Object(k.setTrackToAddToPlaylist)(null))}},onLoadItems:function(e){return function(t,a){return(0,e.dispatch)(Object(k.fetchCurrentLibraryPlaylistsRegularRange)(t,a))}},onClose:function(e){return function(){return(0,e.dispatch)(Object(k.setTrackToAddToPlaylist)(null))}}}),W()({componentWillMount:function(){(0,this.props.onLoadItems)(0,30)}}))(function(e){var t=e.trackToAddToPlaylist,a=e.playlistIds,n=e.values,c=e.onSelectPlaylist,i=e.onLoadItems,l=e.onClose;return null==t?null:r.a.createElement(Sa,{onClose:l},r.a.createElement(Pa,{playlistIds:a,values:n,onSelectPlaylist:c,onLoadItems:i}))});var Ra=G()(F()({onChangeSection:function(e){return function(t){var a=e.history,n=e.location;if(t===e.section)return null;var r=new window.URLSearchParams(n.search);r.set("section",t),a.push({pathname:n.pathname,search:r.toString()})}},onChangeItem:function(e){return function(t,a){var n=e.history,r=e.location,c=new window.URLSearchParams(r.search);c.set("itemType",t),c.set("itemId",a),n.push({pathname:r.pathname,search:c.toString()})}}}),se()(function(e){var t=new window.URLSearchParams(e.location.search),a=parseInt(t.get("itemId"),10);return{section:t.get("section"),itemType:t.get("itemType"),itemId:isNaN(a)?null:a}}))(function(e){var t=e.displayPlayer,a=e.section,n=e.itemType,c=e.itemId,i=e.onChangeSection,l=e.onChangeItem,o=r.a.createElement("div",{className:"App-browser"},r.a.createElement(ia,{section:a,itemType:n,itemId:c,onChangeItem:l,onChangeSection:i}));return t&&(o=r.a.createElement(Ta,null)),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-main"},o),r.a.createElement(ka,{onNavigate:l}),r.a.createElement(Oa,null),r.a.createElement(ve,{onNavigate:l}))});var wa=Object(l.b)(function(e){return{displayPlayer:Object(k.selectDisplayPlayer)(e)}})(function(e){var t=e.history,a=e.location,n=e.displayPlayer;return r.a.createElement(Ra,{displayPlayer:n,location:a,history:t})}),Na=function(e){function t(){return Object(E.a)(this,t),Object(T.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(I.a)(t,[{key:"getChildContext",value:function(){return{library:this.props.library}}},{key:"render",value:function(){var e=this.props,t=e.ready,a=e.match,n=e.location,c=e.loggedIn,i=e.librarySectionId;return t?"/login"===n.pathname||c?"/settings"!==n.pathname&&null==i&&c?r.a.createElement(O.a,{to:"/settings"}):a.isExact?r.a.createElement(O.a,{to:"/library"}):r.a.createElement(R,null,r.a.createElement(s.a,{path:"/login",component:q}),r.a.createElement(s.a,{path:"/settings",component:le}),r.a.createElement(s.a,{path:"/library",component:wa})):r.a.createElement(O.a,{to:"/login"}):r.a.createElement(R,null,r.a.createElement(M,null))}}]),t}(n.Component);Na.childContextTypes={library:P.a.shape({})};var Aa=Object(l.b)(function(e){return{library:k.selectPlex.library(e),ready:k.selectPlex.ready(e),loggedIn:k.selectUser.loggedIn(e),librarySectionId:Object(k.selectLibrarySectionId)(e)}})(Na),ja=function(){var e=m.applyMiddleware.apply(void 0,Object(u.a)(k.middleware).concat([Object(d.createLogger)({predicate:function(){return!1},collapsed:!0})])),t=b()(["queue","user","plex.instance.serverId","ui.librarySectionId"])(v()(window.localStorage));return Object(m.createStore)(g,Object(m.compose)(e,f()(t,"plex")))}();i.a.render(r.a.createElement(l.a,{store:ja},r.a.createElement(o.a,null,r.a.createElement(s.a,{path:"/",component:Aa}))),document.getElementById("root"))}},[[470,1,2]]]);
//# sourceMappingURL=main.d540b8af.chunk.js.map