(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{467:function(e){e.exports={a:"1.8.0"}},480:function(e,t,a){e.exports=a(830)},495:function(e,t,a){},526:function(e,t){},528:function(e,t){},622:function(e,t,a){},675:function(e,t,a){},677:function(e,t,a){},680:function(e,t,a){},682:function(e,t,a){},684:function(e,t,a){},686:function(e,t,a){},688:function(e,t,a){},690:function(e,t,a){},693:function(e,t,a){},695:function(e,t,a){},697:function(e,t,a){},699:function(e,t,a){},701:function(e,t,a){},762:function(e,t,a){},766:function(e,t,a){},768:function(e,t,a){},770:function(e,t,a){},772:function(e,t,a){},775:function(e,t,a){},781:function(e,t,a){},783:function(e,t,a){},785:function(e,t,a){},787:function(e,t,a){},789:function(e,t,a){},791:function(e,t,a){},795:function(e,t,a){},797:function(e,t,a){},799:function(e,t,a){},801:function(e,t,a){},803:function(e,t,a){},805:function(e,t,a){},807:function(e,t,a){},809:function(e,t,a){},811:function(e,t,a){},813:function(e,t,a){},816:function(e,t,a){},818:function(e,t,a){},820:function(e,t,a){},822:function(e,t,a){},824:function(e,t,a){},826:function(e,t,a){},828:function(e,t,a){},830:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(60),i=a.n(c),l=a(459),o=a.n(l),s=a(23),u=a(136),m=a(832),d=(a(493),a(495),a(79)),h=a(88),f=a(463),p=a(328),v=a.n(p),b=a(329),y=a.n(b),k=a(464),g=a.n(k),E=a(1),I=E.createRootReducer({reducers:{routing:u.c}});var T=a(36),S=a(37),C=a(39),O=a(38),L=a(40),P=a(2),R=a.n(P),w=a(833);a(622);function j(e){var t=e.children;return r.a.createElement("div",{className:"Root"},r.a.createElement("div",{className:"Root-contents"},t))}var N=a(33),A=a.n(N),x=a(76),B=a(465),M=(a(675),function(){return r.a.createElement("div",{className:"Loading"},r.a.createElement(B.Pulse,{size:60,color:"var(--primary)"}))}),H=function(e){function t(){return Object(T.a)(this,t),Object(C.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){var e=Object(x.a)(A.a.mark(function e(){var t,a,n;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.serverId,n=t.dispatch,e.next=3,n(Object(E.initializePlex)());case 3:if(null==a){e.next=10;break}return e.next=6,n(Object(E.fetchServerStatus)(a));case 6:return e.next=8,n(Object(E.usePlexServer)(a));case 8:return e.next=10,n(Object(E.fetchLibrarySections)());case 10:n(Object(E.setPlexReady)());case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(M,null)}}]),t}(n.Component),D=Object(s.b)(function(e){return{library:E.selectPlex.library(e),serverId:E.selectPlex.serverId(e)}})(H);a(677);var q=function(e){var t=e.pin;return r.a.createElement("div",{className:"LoginWithPin"},r.a.createElement("h1",{className:"LoginWithPin-logo"},"HiFi Kitchen"),r.a.createElement("p",{className:"LoginWithPin-tagline"},"A Music Player for Plex"),r.a.createElement("div",{className:"LoginWithPin-form"},r.a.createElement("p",null,"Copy this code to your clipboard"),r.a.createElement("h2",{className:"LoginWithPin-pin"},t.code),r.a.createElement("a",{href:"https://plex.tv/link",target:"_blank",rel:"noopener noreferrer",className:"LoginWithPin-button"},"Login With Plex")))},U=function(e){function t(){return Object(T.a)(this,t),Object(C.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){var e=this;(0,this.props.dispatch)(Object(E.fetchPin)()),this.interval=setInterval(function(){e.handleCheckPin()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"handleCheckPin",value:function(){var e=this.props,t=e.dispatch,a=e.pin;null!=a&&null!=a.id&&t(Object(E.checkPin)(a.id))}},{key:"render",value:function(){var e=this.props,t=e.pin;return e.loggedIn?r.a.createElement(w.a,{to:"/settings"}):r.a.createElement(q,{pin:t})}}]),t}(n.Component),Q=Object(s.b)(function(e){return{loggedIn:E.selectUser.loggedIn(e),pin:E.selectPin.value(e)}})(U),G=a(466),Y=a(10),W=a.n(Y),z=a(116),F=a.n(z),K=a(5),_=a.n(K),V=a(831),J=(a(680),a(14)),X=a(4),Z=a.n(X);a(682);function $(e){var t=e.className,a=e.icon,n=Object(J.a)(e,["className","icon"]),c=Z()(t,"icon","icon-".concat(a));return r.a.createElement("div",Object.assign({className:c},n))}a(684),a(686);function ee(e){var t=e.selected,a=e.server,n=e.onSelect,c=a.status,i="",l=!1;switch(!0){case null==c||!1===c.available:i="Unavailable",l=!0;break;case c.connection.local:i="Nearby";break;default:i="Available"}var o=!l&&"https"===c.connection.protocol;return r.a.createElement("button",{className:Z()("ServerListItem",{"ServerListItem-selected":t,"ServerListItem-unavailable":l,"ServerListItem-secure":o}),onClick:n},r.a.createElement("div",{className:"ServerListItem-text"},r.a.createElement("h1",{className:"ServerListItem-name"},a.name),r.a.createElement("h2",{className:"ServerListItem-status"},i)),r.a.createElement($,{icon:"check",className:"ServerListItem-icon-ok ServerListItem-icon"}),r.a.createElement($,{icon:"lock",className:"ServerListItem-icon-lock ServerListItem-icon"}),r.a.createElement($,{icon:"attention",className:"ServerListItem-icon-warning ServerListItem-icon"}))}function te(e){var t=e.selectedId,a=e.servers,n=e.onChange;return r.a.createElement("div",{className:"ServerList"},a.map(function(e,a){return r.a.createElement(ee,{key:a,server:e,selected:e.id===t,onSelect:function(){return n&&n(e.id)}})}))}a(688),a(690);var ae={movie:"video",artist:"music",photo:"picture",show:"monitor"};function ne(e){var t=e.section,a=e.selected,n=e.onSelect,c=ae[t.type];return r.a.createElement("button",{className:Z()("LibrarySectionListItem",{"LibrarySectionListItem-selected":a}),onClick:n},r.a.createElement("h1",{className:"LibrarySectionListItem-title"},t.title),r.a.createElement($,{icon:"ok",className:"LibrarySectionListItem-icon-ok LibrarySectionListItem-icon"}),r.a.createElement($,{icon:c,className:"LibrarySectionListItem-icon-type LibrarySectionListItem-icon"}))}function re(e){var t=e.sections,a=e.selectedId,n=e.onChange;return r.a.createElement("div",{className:"LibrarySectionList"},t.map(function(e,t){return r.a.createElement(ne,{key:t,section:e,selected:e.id===a,onSelect:function(){return n&&n(e.id)}})}))}var ce=a(467);function ie(e){var t=e.servers,a=e.selectedServerId,n=e.onSelectServer,c=e.librarySections,i=e.selectedLibrarySectionId,l=e.onSelectLibrarySection,o=e.onLogOut;return r.a.createElement("div",{className:"Settings"},r.a.createElement("div",{className:"Settings-contents"},r.a.createElement("h1",null,"Plex Server Settings"),t.length>0&&r.a.createElement("h2",{className:"Settings-sectionHeader"},"1. Select a Server"),r.a.createElement(te,{servers:t,selectedId:a,onChange:n}),c.length>0&&r.a.createElement("h2",{className:"Settings-sectionHeader"},"2. Select your Music Library"),r.a.createElement(re,{sections:c,selectedId:i,onChange:l}),null!=i&&r.a.createElement(V.a,{to:"/library",className:"Settings-doneButton"},"Done"),r.a.createElement("footer",{className:"Settings-footer"},r.a.createElement("button",{onClick:o,className:"Settings-logoutButton"},r.a.createElement($,{icon:"logout"})," Log Out"),r.a.createElement("span",{className:"Settings-version"},"v",ce.a))))}function le(){return(le=Object(x.a)(A.a.mark(function e(){var t,a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t(Object(E.fetchAccountServers)());case 3:a=e.sent,E.selectAccountServers.value(a()).forEach(function(e){return t(Object(E.fetchServerStatus)(e))});case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function oe(){return(oe=Object(x.a)(A.a.mark(function e(t){var a,n,r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.serverId,n=t.dispatch,r=this.props.serverId,a!==r&&n(Object(E.fetchLibrarySections)());case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var se=W()(Object(s.b)(function(e){return{accountServers:E.selectAccountServers.value(e),allDevices:E.selectAllDevices.values(e),allConnections:E.selectAllConnections.values(e),allStatuses:E.selectServerStatus.values(e),librarySections:E.selectLibrarySections.value(e),serverId:E.selectPlex.serverId(e),librarySectionId:Object(E.selectLibrarySectionId)(e)}}),F()({componentWillMount:function(){return le.apply(this,arguments)},componentWillReceiveProps:function(e){return oe.apply(this,arguments)}}),_()({onSelectServer:function(e){return function(t){(0,e.dispatch)(Object(E.usePlexServer)(t))}},onSelectLibrarySection:function(e){return function(t){(0,e.dispatch)(Object(E.setLibrarySectionId)(t))}},onLogOut:function(){return function(){delete window.localStorage.plex,window.location.reload()}}}))(function(e){var t=e.accountServers,a=e.allDevices,n=e.allConnections,c=e.allStatuses,i=e.librarySections,l=e.librarySectionId,o=e.serverId,s=e.onSelectServer,u=e.onSelectLibrarySection,m=e.onLogOut,d=t.map(function(e){var t=c.get(e),r=t&&n.get(t.connection);return Object(G.a)({},a.get(e),{status:t,connection:r})});return r.a.createElement(ie,{servers:d,selectedServerId:o,onSelectServer:s,librarySections:i,selectedLibrarySectionId:l,onSelectLibrarySection:u,onLogOut:m})}),ue=a(468),me=a.n(ue),de=(a(693),a(695),a(61)),he=a(28),fe=a.n(he),pe="TRACK_CONTEXT_MENU",ve=W()(Object(de.d)(pe),fe()({onNavigate:R.a.func.isRequired,trigger:R.a.shape({track:R.a.shape({}).isRequired})}),_()({onAddTrackToPlaylist:function(e){return function(){var t=e.trigger;(0,e.onAddTrackToPlaylist)((t&&t.track||{}).id)}},onRemoveItemFromPlaylist:function(e){return function(){var t=e.trigger,a=e.onRemoveItemFromPlaylist,n=t&&t.context,r=n&&n.playlistItem;null!=r&&a(r.id,r.playlistId)}},onGoToArtist:function(e){return function(){var t=e.trigger,a=e.onNavigate,n=t&&t.track||{};a(E.ARTIST,n.grandparentId)}},onGoToAlbum:function(e){return function(){var t=e.trigger,a=e.onNavigate,n=t&&t.track||{};a(E.ALBUM,n.parentId)}}}))(function(e){var t=e.id,a=e.trigger,n=e.onGoToArtist,c=e.onGoToAlbum,i=e.onAddTrackToPlaylist,l=e.onRemoveItemFromPlaylist;return r.a.createElement(de.a,{id:t},r.a.createElement(de.c,{onClick:c},"Go to Album"),r.a.createElement(de.c,{onClick:n},"Go to Artist"),r.a.createElement(de.c,{onClick:i},"Add to Playlist..."),a&&a.context&&a.context.playlistItem&&r.a.createElement(de.c,{onClick:l},"Remove from Playlist"))}),be=function(e){return r.a.createElement(ve,e)},ye=Object(s.b)()(function(e){var t=e.onNavigate,a=e.dispatch;return r.a.createElement(be,{onAddTrackToPlaylist:W()(a,E.setTrackToAddToPlaylist),onRemoveItemFromPlaylist:W()(a,E.removeItemFromPlaylist),onNavigate:t})}),ke=a(92),ge=a(21),Ee=a.n(ge);a(697);function Ie(e){var t=e.item,a=e.components,n=t._type;if(!1===Object.hasOwnProperty.call(a,n))throw new Error('Type "'.concat(n,'" is not supported'));return a[n](t)}Ie.propTypes={item:R.a.shape({_type:R.a.string}).isRequired,components:R.a.objectOf(R.a.func).isRequired};a(699),a(701);var Te=a(183),Se=a.n(Te);function Ce(e){var t=e.width,a=e.height,n=e.library,c=e.src,i=e.quality,l=Object(J.a)(e,["width","height","library","src","quality"]);if(null==c)return r.a.createElement("div",l);var o=n.resizePhoto({url:c,width:t,height:a,quality:i}),s="url(".concat(o,")");return r.a.createElement("div",Object.assign({},l,{style:{backgroundImage:s}}))}Ce.defaultProps={width:400,height:400,quality:90,library:{resizePhoto:function(e){return e.url}}};var Oe=Se()({library:R.a.shape({})})(Ce);function Le(e){var t=e.imageClassName,a=e.className,n=e.src,c=e.size,i=e.quality;return r.a.createElement("div",{className:Z()(a,"SquareImage")},r.a.createElement(Oe,{className:Z()(t,"SquareImage-container"),width:c,height:c,src:n,quality:i}))}function Pe(e){var t=e.onSelect,a=e.image,n=e.title,c=e.subtitle,i=e.highlight,l=Object(J.a)(e,["onSelect","image","title","subtitle","highlight"]);return r.a.createElement("button",Object.assign({},l,{className:"GridItem",onClick:t}),r.a.createElement(Le,{className:"GridItem-thumb",imageClassName:Z()("GridItem-thumbImage",{"GridItem-thumbImage-highlight":i}),src:a,alt:n,size:300,quality:50}),r.a.createElement("div",{className:"GridItem-text"},r.a.createElement("h2",{className:"GridItem-title"},n),r.a.createElement("h3",{className:"GridItem-subtitle"},c)))}var Re=_()({onSelect:function(e){return function(){var t=e.artist;(0,e.onSelect)(E.ARTIST,t.id)}}})(function(e){var t=e.artist,a=Object(J.a)(e,["artist"]);return r.a.createElement(Pe,Object.assign({},a,{image:t.thumb,title:t.title,subtitle:t.genre.join(", ")}))});var we=_()({onSelect:function(e){return function(){var t=e.album;(0,e.onSelect)(E.ALBUM,t.id)}}})(function(e){var t=e.album,a=Object(J.a)(e,["album"]);return r.a.createElement(Pe,Object.assign({},a,{image:t.thumb,title:t.title,subtitle:t.parentTitle}))}),je=a(469),Ne=a.n(je);var Ae=_()({onSelect:function(e){return function(){var t=e.playlist;(0,e.onSelect)(E.PLAYLIST,t.id)}}})(function(e){var t=e.playlist,a=Object(J.a)(e,["playlist"]);return r.a.createElement(Pe,Object.assign({},a,{image:t.composite,title:t.title,subtitle:"".concat(t.leafCount," ").concat(Ne()("item",t.leafCount)),highlight:t.smart}))});var xe=_()({onSelect:function(e){return function(){var t=e.track;(0,e.onSelect)(E.TRACK,t.id)}}})(function(e){var t=e.track,a=Object(J.a)(e,["track"]);return r.a.createElement(Pe,Object.assign({},a,{image:t.thumb,title:t.title,subtitle:t.originalTitle}))});function Be(e){var t=e.item,a=Object(J.a)(e,["item"]);return r.a.createElement(Ie,{item:t,components:{artist:function(e){return r.a.createElement(Re,Object.assign({},a,{artist:e}))},album:function(e){return r.a.createElement(we,Object.assign({},a,{album:e}))},playlist:function(e){return r.a.createElement(Ae,Object.assign({},a,{playlist:e}))},track:function(e){return r.a.createElement(xe,Object.assign({},a,{track:e}))}}})}var Me=a(8),He=a(20),De=a(186),qe=a.n(De),Ue=(a(762),a(117)),Qe=a.n(Ue);var Ge=Qe()(function(e){var t=e.itemWidth,a=e.items,n=e.style,c=e.rowOffset,i=e.renderItem;return r.a.createElement("div",{className:"Grid-row",style:n},r.a.createElement("div",{className:"Grid-rowItems",style:{marginLeft:"".concat(c,"px")}},a.map(function(e,a){return r.a.createElement("div",{key:a,className:"Grid-item",style:{width:"".concat(t,"px"),minWidth:"".concat(t,"px")}},i(e))})))}),Ye=qe()(),We=function(e){function t(){var e;return Object(T.a)(this,t),(e=Object(C.a)(this,Object(O.a)(t).call(this))).handleLoadMoreRows=e.handleLoadMoreRows.bind(Object(Me.a)(Object(Me.a)(e))),e}return Object(L.a)(t,e),Object(S.a)(t,[{key:"calcRows",value:function(){var e=this.props,t=e.itemsPerRow;return e.items.reduce(function(e,a,n){return n%t===0&&e.push([]),e[e.length-1].push(a),e},[])}},{key:"calcTotal",value:function(){var e=this.props,t=e.items,a=e.total;return null!=a?a:t.length}},{key:"handleLoadMoreRows",value:function(e){var t=e.startIndex,a=e.stopIndex,n=this.props,r=n.onLoad,c=n.itemsPerRow;return r(t*c,(a+1)*c)}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.width,c=t.height,i=t.className,l=t.getItemHeight,o=t.itemsPerRow,s=t.paddingHorizontal,u=n-Ye-2*s,m=Math.floor(u/o),d=l(m),h=(n-Ye)%m/2,f=this.calcTotal(),p=this.calcRows(),v=Math.ceil(f/o),b=function(e){var t=e.index,n=e.key,c=e.style,i=p[t];return null==i?r.a.createElement("div",{key:n,style:c}):r.a.createElement(Ge,{key:n,style:c,rowOffset:h,itemWidth:m,items:i.filter(function(e){return null!=e}),renderItem:a})};return r.a.createElement("div",{className:Z()(i,"Grid")},r.a.createElement(He.c,{isRowLoaded:function(e){var t=e.index,a=p[t];return null!=a&&a.every(function(e){return null!=e})},loadMoreRows:this.handleLoadMoreRows,rowCount:v},function(t){var a=t.onRowsRendered,i=t.registerChild;return r.a.createElement(He.d,{width:n,height:c,onRowsRendered:a,ref:function(t){e.list=t,i(t)},rowCount:v,rowHeight:d,rowRenderer:b,style:{overflowX:"hidden"}})}))}}]),t}(n.Component);function ze(e){return function(t){return r.a.createElement(He.a,null,function(a){var n=a.height,c=a.width;return r.a.createElement(e,Object.assign({},t,{width:c,height:n}))})}}We.defaultProps={itemsPerRow:5,getItemHeight:function(e){return e},paddingHorizontal:0};var Fe=ze(We),Ke=a(89),_e=a.n(Ke),Ve=_e()("currentId","onChange",null),Je=W()(Se()({router:R.a.shape({}).isRequired}),_()({onChange:function(e){var t=e.itemPath,a=e.router;return function(e){var n=t(e,a.params);a.push(n)}}}));function Xe(e){var t=e.onChange,a=Object(J.a)(e,["onChange"]);return r.a.createElement(Fe,Object.assign({},a,{itemsPerRow:6,getItemHeight:function(e){return e+50},paddingHorizontal:5}),function(e){return r.a.createElement(Be,{item:e,onSelect:t})})}Xe.defaultProps={onChange:Ee.a},Xe.withState=Ve(Xe),Xe.withRouter=Je(Xe);a(766),a(768),a(770);function Ze(e){var t=e.src;return r.a.createElement("div",{className:"BlurImage"},r.a.createElement("div",{className:"BlurImage-blur"},r.a.createElement(Oe,{className:"BlurImage-image",src:t})),r.a.createElement("div",{className:"BlurImage-shadow"}))}function $e(e){var t=e.thumb,a=e.title,n=e.subtitle,c=e.meta,i=e.onClickSubtitle,l=e.onClickMeta,o=e.onClose,s=e.onRefresh,u=e.onEdit;return r.a.createElement("div",{className:"PanelHeader"},r.a.createElement(Ze,{src:t}),r.a.createElement(Le,{className:"PanelHeader-thumb",imageClassName:"PanelHeader-thumbImage",src:t,alt:a,size:150,quality:90}),r.a.createElement("div",{className:"PanelHeader-text"},r.a.createElement("div",{className:"PanelHeader-title"},a),r.a.createElement("button",{className:"PanelHeader-subtitle",onClick:i},n),r.a.createElement("button",{className:"PanelHeader-meta",onClick:l},c)),o&&r.a.createElement($,{icon:"cancel",className:"PanelHeader-close",onClick:o}),s&&r.a.createElement($,{icon:"cw",className:"PanelHeader-refresh",onClick:s}),u&&r.a.createElement($,{icon:"pencil",className:"PanelHeader-edit",onClick:u}))}function et(e){var t=e.details,a=e.children,n=e.className,c=e.onClickSubtitle,i=e.onClickMeta,l=e.onClose,o=e.onRefresh,s=e.onEdit;return r.a.createElement("div",{className:Z()(n,"Panel")},r.a.createElement($e,Object.assign({},t,{onClickSubtitle:c,onClickMeta:i,onClose:l,onRefresh:o,onEdit:s})),r.a.createElement("div",{className:"Panel-content"},a))}a(772);var tt=_()({onLoad:function(e){return function(t){var a=t.startIndex,n=t.stopIndex;return(0,e.onLoad)(a,n+1)}}})(function(e){var t=e.rowCount,a=e.renderItem,n=e.isRowLoaded,c=e.onLoad,i=Object(J.a)(e,["rowCount","renderItem","isRowLoaded","onLoad"]);return r.a.createElement(He.c,{isRowLoaded:n,loadMoreRows:c,rowCount:t},function(e){var n=e.onRowsRendered,c=e.registerChild;return r.a.createElement(He.d,Object.assign({},i,{rowCount:t,rowRenderer:a,onRowsRendered:n,ref:c}))})}),at=ze(tt),nt=a(90),rt=a.n(nt);a(774);function ct(e){var t=e.value,a=e.unit,n=e.format,c=e.trim,i=e.stopTrim,l=Object(J.a)(e,["value","unit","format","trim","stopTrim"]),o=rt.a.duration(t,a).format(n,{trim:c,stopTrim:i});return r.a.createElement("span",l,o)}ct.defaultProps={format:"h:mm:ss",unit:"ms",trim:!0,stopTrim:"mm"};a(775);function it(e){for(var t=e.className,a=e.style,n=e.value,c=e.maxValue,i=e.hover,l=e.onClick,o=e.onMouseDown,s=e.onMouseOver,u=e.onMouseLeave,m=[],d="calc(".concat(100/c,"% - 1px)"),h=0;h<c;h+=1)m.push(r.a.createElement("div",{key:h,"data-key":h,style:{width:d},className:Z()("RatingBars-bar",{"RatingBars-bar-active":h<n,"RatingBars-bar-hover":null!=i&&h<=i})}));return r.a.createElement("div",{style:a,className:Z()(t,"RatingBars"),onClick:l,onMouseDown:o,onMouseOver:s,onMouseLeave:u},m)}it.defaultProps={value:0,maxValue:5};var lt=W()(fe()({onRate:R.a.func.isRequired}),_e()("hover","setHover",null),_()({onClick:function(){return function(e){e.stopPropagation()}},onMouseDown:function(e){return function(){var t=e.hover;(0,e.onRate)(t+1)}},onMouseOver:function(e){return function(t){var a=e.setHover,n=t.target.getAttribute("data-key"),r=parseInt(n,10);!1===isNaN(r)&&a(r)}},onMouseLeave:function(e){return function(){(0,e.setHover)(null)}}}))(it),ot=a(91);a(781);var st=new ot.SortableHandle(function(e){var t=e.className;return r.a.createElement($,{icon:"menu",className:Z()("SortHandle",t)})});a(783);function ut(e){var t=e.paused,a=Z()("SoundBars",{"SoundBars-paused":t});return r.a.createElement("div",{className:a},r.a.createElement("div",{className:"SoundBars-bar"}),r.a.createElement("div",{className:"SoundBars-bar"}),r.a.createElement("div",{className:"SoundBars-bar"}),r.a.createElement("div",{className:"SoundBars-bar"}))}a(785);var mt=function(e){var t=e.playerState,a=e.track,n=e.trackIndex;return e.currentlyPlaying?r.a.createElement("span",{className:"TrackListItemHandle-nowPlayingIcon"},r.a.createElement(ut,{paused:t===E.PLAYER_STATE_PAUSED})):r.a.createElement("span",{className:"TrackListItemHandle-index"},null!=n?n:a.index)};var dt=function(e){return e.sortable?r.a.createElement("div",{className:"TrackListItemHandle-sortableContainer"},r.a.createElement(st,{className:"TrackListItemHandle-sortHandle"}),r.a.createElement(mt,e)):r.a.createElement("div",{className:"TrackListItemHandle-container"},r.a.createElement(mt,e))};a(787);var ht=_()({onRate:function(e){return function(t){var a=e.track;(0,e.onRate)(a.id,t)}},onSelect:function(e){return function(){var t=e.track;(0,e.onSelect)(t)}}})(function(e){var t=e.context,a=e.track,n=e.style,c=e.displayArtist,i=e.relativeTrackStartTime,l=e.onSelect,o=e.onRate,s=e.onClickTime;return r.a.createElement(de.b,{renderTag:"button",attributes:{className:"TrackListItem",style:n,onClick:l},id:pe,context:t,track:a,collect:function(e){return e}},r.a.createElement("div",{className:"TrackListItem-contents"},r.a.createElement(dt,e),r.a.createElement("span",{className:"TrackListItem-fulltitle"},r.a.createElement("span",{className:"TrackListItem-title"},a.title),null!=c&&c!==a.originalTitle&&r.a.createElement("span",{className:"TrackListItem-artist"},a.originalTitle)),r.a.createElement(lt,{className:"TrackListItem-rating",value:a.userRating,maxValue:10,onRate:o}),r.a.createElement(ct,{className:"TrackListItem-duration",value:null!=i?i:a.duration,onClick:s})))});var ft=function(e){var t=e.index,a=e.style;return r.a.createElement("button",{className:"TrackListItem",style:a},r.a.createElement("div",{className:"TrackListItem-contents"},r.a.createElement("span",{className:"TrackListItem-index"},t),r.a.createElement("span",{className:"TrackListItem-fulltitle"},r.a.createElement("span",{className:"TrackListItem-artist"},"Loading..."))))};a(789);function pt(e){var t=e.trackIds,a=e.values,n=e.style,c=t.map(function(e){return a.tracks.get(e)}).filter(function(e){return null!=e}).reduce(function(e,t){return t.duration+e},0);return r.a.createElement("div",{className:"TrackListSummary",style:n},"Tracks: ",t.length,", Total Time: ",r.a.createElement(ct,{value:c,format:"h [h] m [min] ss [sec]"}))}function vt(e){var t=e.children,a=e.layout,n=e.onLoad;return t({rowCount:a.reduce(function(e,t){return e+t.size},0),renderItem:function(t){for(var n=t.index,r=0,c=0;c<a.length;c+=1){var i=r+a[c].size;if(n>=r&&n<i){var l=n-r,o=a[c].items[l];return a[c].render(o,l)(t)}r=i}return console.error("Could not render item!",{props:e,layout:a}),!1},isRowLoaded:function(e){for(var t=e.index,n=0,r=0;r<a.length;r+=1){var c=n+a[r].size;if(t>=n&&t<c){var i=t-n;return null!=a[r].items[i]}n=c}return console.error("Could not detect if row is loaded!",{index:t,layout:a}),!1},onLoad:n})}vt.propTypes={children:R.a.func,layout:R.a.arrayOf(R.a.shape({size:R.a.number.isRequired,items:R.a.arrayOf(R.a.any).isRequired,render:R.a.func.isRequired})).isRequired,onLoad:R.a.func.isRequired};function bt(e){var t=e.trackIds,a=e.renderTrackItem,n=e.renderSummary,c=e.onLoadItems,i=[{size:t.length,items:t,render:a},{size:1,items:[!0],render:n}];return r.a.createElement(vt,{layout:i,onLoad:c},function(e){var t=e.rowCount,a=e.isRowLoaded,n=e.renderItem,c=e.onLoad;return r.a.createElement(at,{rowHeight:40,rowCount:t,renderItem:n,isRowLoaded:a,onLoad:c})})}bt.defaultProps={tracksIds:[]};var yt=W()(fe()({currentlyPlayingTrackId:R.a.number,displayArtist:R.a.oneOfType([R.a.string,R.a.bool]),onRateTrack:R.a.func.isRequired,onSelectTrack:R.a.func.isRequired,playerState:R.a.string,preserveTrackIndex:R.a.bool}),_()({renderTrackItem:function(e){return function(t,a){return function(n){var c=n.key,i=n.style,l=e.values,o=e.preserveTrackIndex,s=e.currentlyPlayingTrackId,u=e.displayArtist,m=e.playerState,d=e.onRateTrack,h=e.onSelectTrack,f=l.tracks.get(t);return null==f?r.a.createElement(ft,{key:c,style:i,index:o?null:a+1}):r.a.createElement(ht,{key:c,style:i,track:f,index:o?f.index:a+1,playerState:m,currentlyPlaying:t===s,onRate:d,onSelect:h,displayArtist:u})}}},renderSummary:function(e){return function(){return function(t){var a=t.style,n=t.key,c=e.trackIds,i=e.values;return r.a.createElement(pt,{key:n,style:a,trackIds:c,values:i})}}}}))(bt);var kt=W()(fe()({onNavigate:R.a.func.isRequired,onCreateQueue:R.a.func.isRequired}),_()({onClickSubtitle:function(e){return function(){var t=e.album;(0,e.onNavigate)(E.ARTIST,t.parentId)}},onSelectTrack:function(e){return function(t){var a=e.album;(0,e.onCreateQueue)(E.ALBUM,a.id,t.id)}}}))(function(e){var t=e.album,a=e.values,n=e.currentlyPlayingTrackId,c=e.playerState,i=e.onRateTrack,l=e.onLoadItems,o=e.onClickSubtitle,s=e.onSelectTrack,u=Object(J.a)(e,["album","values","currentlyPlayingTrackId","playerState","onRateTrack","onLoadItems","onClickSubtitle","onSelectTrack"]),m={thumb:t.thumb,title:t.title,subtitle:t.parentTitle,meta:null!=t.year?t.year.toString():""},d=a.albumTracks.get(t.id)||[];return r.a.createElement(et,Object.assign({},u,{details:m,onClickSubtitle:o}),r.a.createElement(yt,{displayArtist:t.parentTitle,currentlyPlayingTrackId:n,onLoadItems:l,onRateTrack:i,onSelectTrack:s,playerState:c,preserveTrackIndex:!0,trackIds:d,values:a}))});a(791);function gt(e){var t=e.album,a=e.style;return r.a.createElement("div",{style:a,className:"AlbumListHeader"},r.a.createElement(Ze,{src:t.thumb}),r.a.createElement("div",{className:"AlbumListHeader-title"},t.title))}function Et(e){for(var t=e.albumIds,a=e.values,n=e.renderAlbumHeader,c=e.renderTrackItem,i=e.renderAlbumSummary,l=e.onLoadItems,o=[],s=0;s<t.length;s+=1){var u=t[s],m=a.albumTracks.get(u)||[];o.push({size:1,items:[u],render:n}),o.push({size:m.length,items:m,render:c})}return o.push({size:1,items:[!0],render:i}),r.a.createElement(vt,{layout:o,onLoad:l},function(e){var t=e.rowCount,a=e.isRowLoaded,n=e.renderItem,c=e.onLoad;return r.a.createElement(at,{rowHeight:40,rowCount:t,renderItem:n,isRowLoaded:a,onLoad:c})})}Et.defaultProps={albumIds:[]};var It=W()(fe()({displayArtist:R.a.bool,currentlyPlayingTrackId:R.a.number,onRateTrack:R.a.func.isRequired,onSelectTrack:R.a.func.isRequired}),_()({renderAlbumHeader:function(e){return function(t){return function(a){var n=a.key,c=a.style,i=e.values.albums.get(t);return r.a.createElement(gt,{key:n,style:c,album:i})}}},renderTrackItem:function(e){return function(t){return function(a){var n=a.key,c=a.style,i=e.values,l=e.displayArtist,o=e.currentlyPlayingTrackId,s=e.onRateTrack,u=e.onSelectTrack,m=i.tracks.get(t);return null==m?r.a.createElement(ft,{key:n,style:c}):r.a.createElement(ht,{key:n,style:c,track:m,index:m.index,currentlyPlaying:t===o,onRate:s,onSelect:u,displayArtist:l})}}},renderAlbumSummary:function(e){return function(){return function(t){var a=t.key,n=t.style,c=e.albumIds,i=e.values,l=c.map(function(e){return i.albumTracks.get(e)}).reduce(function(e,t){return e.concat(t)},[]);return r.a.createElement(pt,{key:a,style:n,trackIds:l,values:i})}}}}))(Et);var Tt=W()(fe()({onCreateQueue:R.a.func.isRequired}),_()({onSelectTrack:function(e){return function(t){var a=e.artist;(0,e.onCreateQueue)(E.ARTIST,a.id,t.id)}}}))(function(e){var t=e.artist,a=e.values,n=e.currentlyPlayingTrackId,c=e.onSelectTrack,i=e.onRateTrack,l=e.onLoadItems,o=Object(J.a)(e,["artist","values","currentlyPlayingTrackId","onSelectTrack","onRateTrack","onLoadItems"]),s={thumb:t.thumb,title:t.title,subtitle:t.genre.join(", "),meta:t.country.join(", ")},u=a.artistAlbums.get(t.id)||[];return r.a.createElement(et,Object.assign({},o,{details:s}),r.a.createElement(It,{albumIds:u,values:a,currentlyPlayingTrackId:n,preserveTrackIndex:!0,onLoadItems:l,onRateTrack:i,onSelectTrack:c}))}),St=a(473),Ct=a.n(St),Ot=ze(new ot.SortableContainer(Ct()(tt),{withRef:!0})),Lt=new ot.SortableElement(ht);function Pt(e){var t=e.playlistItems,a=e.renderPlaylistItem,n=e.renderSummary,c=e.onLoadItems,i=e.onSort,l=[{size:t.length,items:t,render:a},{size:1,items:[!0],render:n}];return r.a.createElement(vt,{layout:l,onLoad:c},function(e){var t=e.rowCount,a=e.isRowLoaded,n=e.renderItem,c=e.onLoad;return r.a.createElement(Ot,{rowHeight:40,rowCount:t,renderItem:n,isRowLoaded:a,onLoad:c,onSortEnd:i,useDragHandle:!0,lockAxis:"y",helperClass:"TrackListItem-helper SortHandle-helper"})})}Pt.defaultProps={playlistItems:[]};var Rt=W()(fe()({currentlyPlayingTrackId:R.a.number,displayArtist:R.a.oneOfType([R.a.string,R.a.bool]),onRateTrack:R.a.func.isRequired,onSelectTrack:R.a.func.isRequired,playerState:R.a.string,preserveTrackIndex:R.a.bool,useRelativeTime:R.a.bool}),_e()("useRelativeTime","setUseRelativeTime",!1),_()({onClickTime:function(e){return function(t){t.stopPropagation();var a=e.useRelativeTime;(0,e.setUseRelativeTime)(!a)}}}),_()({renderPlaylistItem:function(e){return function(t,a){return function(n){var c=n.key,i=n.style,l=e.values,o=e.currentlyPlayingTrackId,s=e.playlistItems,u=e.playerState,m=e.useRelativeTime,d=e.onClickTime,h=e.onRateTrack,f=e.onSelectTrack,p=t&&l.tracks.get(t.track);if(null==t||null==p)return r.a.createElement(ft,{key:c,index:a+1,style:i});var v=null;return m&&(v=s.slice(0,a).reduce(function(e,t){return e+l.tracks.get(t.track).duration},0)),r.a.createElement(Lt,{displayArtist:!0,sortable:!0,key:c,style:i,track:p,trackIndex:a+1,context:{playlistItem:t},index:a,relativeTrackStartTime:v,playerState:u,currentlyPlaying:t.trackId===o,onRate:h,onSelect:f,onClickTime:d})}}},renderSummary:function(e){return function(){return function(t){var a=t.style,n=t.key,c=e.playlistItems,i=e.values,l=c.map(function(e){return e&&e.track});return r.a.createElement(pt,{key:n,style:a,trackIds:l,values:i})}}}}))(Pt);var wt=W()(fe()({onCreateQueue:R.a.func.isRequired}),_()({onSelectTrack:function(e){return function(t){var a=e.playlist;(0,e.onCreateQueue)(E.PLAYLIST,a.id,t.id)}},onSort:function(e){return function(t){var a=t.newIndex,n=t.oldIndex,r=e.playlist;(0,e.onMovePlaylistItem)({playlistId:r.id,newIndex:a,oldIndex:n})}}}))(function(e){var t=e.playlist,a=e.values,n=e.currentlyPlayingTrackId,c=e.playerState,i=e.onSelectTrack,l=e.onLoadItems,o=e.onRateTrack,s=e.onSort,u=Object(J.a)(e,["playlist","values","currentlyPlayingTrackId","playerState","onSelectTrack","onLoadItems","onRateTrack","onSort"]),m={thumb:t.composite,title:t.title,subtitle:t.smart?"Smart Playlist":"Playlist",meta:"".concat(t.leafCount," items")},d=a.playlistItems.get(t.id)||[];return r.a.createElement(et,Object.assign({},u,{details:m}),r.a.createElement(Rt,{currentlyPlayingTrackId:n,onLoadItems:l,onRateTrack:o,onSelectTrack:i,onSort:s,playerState:c,playlistItems:d,values:a}))});function jt(e){var t=e.item,a=Object(J.a)(e,["item"]);return r.a.createElement(Ie,{item:t,components:{album:function(e){return r.a.createElement(kt,Object.assign({},a,{album:e}))},artist:function(e){return r.a.createElement(Tt,Object.assign({},a,{artist:e}))},playlist:function(e){return r.a.createElement(wt,Object.assign({},a,{playlist:e}))}}})}a(795),a(797);var Nt=function(e){function t(){var e;return Object(T.a)(this,t),(e=Object(C.a)(this,Object(O.a)(t).call(this))).state={displayInput:!1},e.handleBlur=e.handleBlur.bind(Object(Me.a)(Object(Me.a)(e))),e.handleChange=e.handleChange.bind(Object(Me.a)(Object(Me.a)(e))),e.handleClick=e.handleClick.bind(Object(Me.a)(Object(Me.a)(e))),e}return Object(L.a)(t,e),Object(S.a)(t,[{key:"handleClick",value:function(e){var t=this.props.onClick;return this.setState({displayInput:!0}),this.input.focus(),t(e)}},{key:"handleBlur",value:function(e){return e.stopPropagation(),this.setState({displayInput:!1}),!0}},{key:"handleChange",value:function(){return(0,this.props.onChange)(this.input.value)}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.query,c=this.state.displayInput;return r.a.createElement("button",{className:Z()(a,"SearchBar"),onClick:this.handleClick},r.a.createElement("div",{className:"SearchBar-contents"},r.a.createElement($,{className:"SearchBar-icon",icon:"search"}),r.a.createElement("div",{className:Z()("SearchBar-inputWrapper",{"SearchBar-inputWrapper_closed":!c})},r.a.createElement("input",{ref:function(t){e.input=t},className:"SearchBar-input",placeholder:"Search...",onBlur:this.handleBlur,onChange:this.handleChange,value:n}))))}}]),t}(n.Component);Nt.defaultProps={onClick:Ee.a,onChange:Ee.a};var At=a(474),xt=a.n(At);a(799),a(801);var Bt=W()(_()({onClick:function(e){return function(){(0,e.onClick)(e.item)}}}))(function(e){var t=e.item,a=e.active,n=e.descending,c=e.onClick,i=Z()("DropdownItem",{"DropdownItem-active":a});return r.a.createElement("li",{className:i},r.a.createElement("button",{className:"DropdownItem-button",onClick:c},t,a&&r.a.createElement($,{icon:n?"down-open":"up-open"})))});var Mt=W()(xt()({onChange:Ee.a}),_e()("open","setOpen",!1),_()({onOpen:function(e){return function(){(0,e.setOpen)(!0)}},onClose:function(e){return function(){(0,e.setOpen)(!1)}},onToggle:function(e){return function(){var t=e.open;(0,e.setOpen)(!t)}},onChange:function(e){return function(t){var a=e.onChange,n=e.setOpen;a(t),n(!1)}}}))(function(e){var t=e.active,a=e.items,n=e.open,c=e.descending,i=e.onToggle,l=e.onChange,o=Z()("Dropdown-menu",{"Dropdown-menu-open":n});return r.a.createElement("div",{className:"Dropdown"},r.a.createElement("button",{className:"Dropdown-button",onClick:i},r.a.createElement("span",{className:"Dropdown-button-text"},t),r.a.createElement($,{icon:"down-dir",className:"Dropdown=button-icon"})),r.a.createElement("ul",{className:o},a.map(function(e){return r.a.createElement(Bt,{key:e,item:e,active:t===e,descending:c,onClick:l})})))});function Ht(e){var t=e.sections,a=e.currentSection,n=e.searchQuery,c=e.sortBy,i=e.sortDesc,l=e.sortOptions,o=e.onChangeSection,s=e.onChangeSearchQuery,u=e.onChangeSortBy,m=e.onRefreshSection,d=r.a.createElement(Nt,{key:E.SEARCH,className:Z()({"NavBar-section-item":!0,"NavBar-section-item-selected":a===E.SEARCH}),query:n,onClick:function(){return o(E.SEARCH)},onChange:s});return r.a.createElement("header",{className:"NavBar"},r.a.createElement("nav",{className:"NavBar-section-list"},Object.keys(t).map(function(e){return e===E.SEARCH?d:r.a.createElement("button",{key:e,className:Z()({"NavBar-section-item":!0,"NavBar-section-item-selected":e===a}),onMouseDown:function(){return o(e)}},t[e])})),r.a.createElement("nav",{className:"NavBar-section-list"},l.length>0&&r.a.createElement(Mt,{active:c,descending:i,items:l,onChange:u}),r.a.createElement(V.a,{to:"/settings",className:"NavBar-section-item"},r.a.createElement($,{icon:"cog"})),r.a.createElement($,{icon:"cw",className:"NavBar-section-item",onClick:m})))}Ht.defaultProps={onChangeSection:Ee.a,onChangeSearchQuery:Ee.a,onChangeSortBy:Ee.a,onRefreshSection:Ee.a};a(803),a(805);var Dt=Qe()(function(e){var t=e.itemWidth,a=e.items,n=e.style,c=e.rowOffset,i=e.renderFn;return r.a.createElement("div",{className:"Grid-row",style:n},r.a.createElement("div",{className:"Grid-rowItems",style:{marginLeft:"".concat(c,"px")}},a.map(function(e,a){return r.a.createElement("div",{key:a,className:"Grid-item",style:{width:"".concat(t,"px"),minWidth:"".concat(t,"px")}},i(e))})))});var qt=Qe()(function(e){var t=e.style,a=e.rowOffset,n=e.section,c=e.renderFn;return r.a.createElement("div",{className:"GridListRowHeader",style:t},r.a.createElement("div",{className:"GridListRowHeader-content",style:{marginLeft:"".concat(a,"px")}},c(n)))}),Ut=qe()(),Qt=function(e){function t(){var e;return Object(T.a)(this,t),(e=Object(C.a)(this,Object(O.a)(t).call(this))).handleLoadMoreRows=e.handleLoadMoreRows.bind(Object(Me.a)(Object(Me.a)(e))),e}return Object(L.a)(t,e),Object(S.a)(t,[{key:"componentDidUpdate",value:function(e){e.width!==this.props.width&&this.list.recomputeRowHeights()}},{key:"calcRows",value:function(){var e=this.props,t=e.sections,a=e.getItemHeight,n=e.itemsPerRow,r=e.width,c=e.paddingHorizontal,i=e.renderItem,l=e.renderHeader,o=r-Ut-2*c,s=Math.floor(o/n),u=a(s),m=(r-Ut)%s/2,h=function(e){return{Component:Dt,props:{renderFn:i,items:e,itemWidth:s,rowOffset:m},height:u,isLoaded:e.every(function(e){return null!=e})}},f=function(e){return function(e){return e.reduce(function(e,t,a){return a%n===0&&e.push([]),e[e.length-1].push(t),e},[])}(e).map(h)};return t.reduce(function(e,t){var a=f(t.items);return Object(d.a)(e).concat([{Component:qt,props:{renderFn:l,section:t,rowOffset:m},height:50,isLoaded:!0}],Object(d.a)(a))},[])}},{key:"calcRowCount",value:function(){var e=this.props,t=e.sections,a=e.itemsPerRow;return t.reduce(function(e,t){var n=null!=t.total?t.total:t.items.length;return e+Math.ceil(n/a)+1},0)}},{key:"handleLoadMoreRows",value:function(e){var t=e.startIndex,a=e.stopIndex,n=this.props,r=n.onLoad,c=n.itemsPerRow;return r(t*c,(a+1)*c)}},{key:"render",value:function(){var e=this,t=this.props,a=t.width,n=t.height,c=t.className,i=this.calcRows(),l=this.calcRowCount(),o=function(e){var t=e.index,a=e.key,n=e.style,c=i[t];return r.a.createElement(c.Component,Object.assign({},c.props,{key:a,style:n}))},s=function(e){var t=e.index;return i[t].height};return r.a.createElement("div",{className:Z()(c,"GridList")},r.a.createElement(He.c,{isRowLoaded:function(e){var t=e.index,a=i[t];return null!=a&&a.isLoaded},loadMoreRows:this.handleLoadMoreRows,rowCount:l},function(t){var c=t.onRowsRendered,i=t.registerChild;return r.a.createElement(He.d,{width:a,height:n,onRowsRendered:c,ref:function(t){e.list=t,i(t)},rowCount:l,rowHeight:s,rowRenderer:o,style:{overflowX:"hidden"}})}))}}]),t}(n.Component);Qt.defaultProps={itemsPerRow:5,getItemHeight:function(e){return e},paddingHorizontal:0};var Gt=ze(Qt);function Yt(e){var t=e.hubs,a=e.onChange,n=Object(J.a)(e,["hubs","onChange"]);return r.a.createElement(Gt,Object.assign({},n,{itemsPerRow:6,getItemHeight:function(e){return e+50},paddingHorizontal:5,renderItem:function(e){return r.a.createElement(Be,{item:e,onSelect:a})},renderHeader:function(e){return r.a.createElement("div",{className:"SearchResults-header"},e.title)},sections:t.filter(function(e){return e.items.length})}))}Yt.defaultProps={onChange:Ee.a};a(807);var Wt=function(e){var t=e.key,a=e.rowData;return r.a.createElement(de.b,{key:t,id:pe,track:a,collect:function(e){return e}},Object(He.f)(e))},zt=function(e){var t=e.tracks,a=e.onLoad,n=e.onChange,c=e.onRate;return r.a.createElement(He.a,null,function(e){var i=e.width,l=e.height;return r.a.createElement(He.c,{isRowLoaded:function(e){var a=e.index;return null!=t[a]},loadMoreRows:function(e){var t=e.startIndex,n=e.stopIndex;return a(t,n+1)},rowCount:t.length},function(e){var a=e.onRowsRendered,o=e.registerChild;return r.a.createElement(He.e,{width:i,height:l,headerHeight:40,headerClassName:"TrackTable-headerColumn",rowCount:t.length,rowGetter:function(e){var a=e.index;return t[a]||{}},rowHeight:40,rowClassName:function(e){var t=e.index;return t<0?"TrackTable-headerRow":t%2===0?"TrackTable-row TrackTable-evenRow":"TrackTable-row TrackTable-oddRow"},rowRenderer:Wt,onRowsRendered:a,onRowClick:function(e){var t=e.rowData;return n(E.TRACK,t.id)},ref:o},r.a.createElement(He.b,{dataKey:"title",label:"Title",width:200}),r.a.createElement(He.b,{label:"Album Artist",dataKey:"grandparentTitle",width:200}),r.a.createElement(He.b,{label:"Artist",dataKey:"originalTitle",width:200}),r.a.createElement(He.b,{label:"Album",dataKey:"parentTitle",width:200}),r.a.createElement(He.b,{label:"Rating",dataKey:"userRating",width:100,cellRenderer:function(e){var t=e.rowData,a=e.cellData;return r.a.createElement(lt,{className:"TrackTable-rating",value:a,maxValue:10,onRate:function(e){return c(t.id,e)}})}}),r.a.createElement(He.b,{label:"Duration",dataKey:"duration",width:100,cellRenderer:function(e){var t=e.cellData;return r.a.createElement(ct,{value:t})}}),r.a.createElement(He.b,{label:"Plays",dataKey:"viewCount",width:50}),r.a.createElement(He.b,{label:"Date Added",dataKey:"addedAt",width:150,cellRenderer:function(e){var t=e.cellData;return t&&rt()(1e3*t).format("MMMM Do, YYYY")}}),r.a.createElement(He.b,{label:"Bitrate",dataKey:"bitrate",cellDataGetter:function(e){var t=e.rowData;return t.media&&t.media[0].bitrate},width:50}))})})},Ft=a(75),Kt=a(108),_t=function(e){var t=e.value,a=e.onChange,n=e.options;return r.a.createElement("select",{value:t,onChange:a},Object.keys(n).map(function(e){return r.a.createElement("option",{key:e,value:e},n[e])}))},Vt=(a(809),function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"text",className:"Input-input",value:t[0],onChange:function(e){return a([e.target.value])}})}),Jt=function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"number",className:"Input-input",value:t[0],onChange:function(e){return a([parseInt(e.target.value,10)])}})},Xt=function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"date",className:"Input-input",value:rt.a.unix(t[0]).format("YYYY-MM-DD"),onChange:function(e){return a([rt()(e.target.value).unix()])}})},Zt=function(e){var t=e.value,a=e.onChange;return r.a.createElement("div",null,r.a.createElement("input",{type:"number",className:"Input-input",value:t[0],onChange:function(e){return a([e.target.value,t[1]])}}),r.a.createElement(_t,{value:t[1],onChange:function(e){return a([t[0],e.target.value])},options:Ft.filter.availableDateUnits}))},$t=function(e){var t=e.operator,a={value:e.value,onChange:e.onChange};switch(t){case"isBefore":case"isAfter":return r.a.createElement(Xt,a);case"inTheLast":case"inNotTheLast":return r.a.createElement(Zt,a);case"isGreaterThan":case"isLessThan":return r.a.createElement(Jt,a);case"is":case"isNot":case"contains":case"doesNotContain":case"beginsWith":case"endsWith":default:return r.a.createElement(Vt,a)}},ea=(a(811),Object(Kt.a)(Object(Kt.d)("property","setProperty","artistTitle"),Object(Kt.d)("operator","setOperator","is"),Object(Kt.d)("value","setValue",["",""]),Object(Kt.b)({setProperty:R.a.func.isRequired,setOperator:R.a.func.isRequired}),Object(Kt.c)({onPropertyChange:function(e){return function(t){var a=e.setProperty,n=e.setOperator,r=e.operator,c=t.target.value;a(c);var i=Ft.filter[c].options();!1===Object.hasOwnProperty.call(i,r)&&n(Object.keys(i)[0])}},onOperatorChange:function(e){return function(t){(0,e.setOperator)(t.target.value)}},onValueChange:function(e){return function(t){(0,e.setValue)(t)}},onSave:function(e){return function(){var t,a=e.onChange,n=e.property,r=e.operator,c=e.value;a((t=Ft.filter[n])[r].apply(t,Object(d.a)(c)))}}}))(function(e){var t,a=e.property,n=e.operator,c=e.value,i=e.onPropertyChange,l=e.onOperatorChange,o=e.onValueChange,s=e.onSave,u=Ft.filter.availableTrackOptions,m=Ft.filter[a].options();return r.a.createElement("div",{className:"Filters"},r.a.createElement(_t,{value:a,onChange:i,options:u}),r.a.createElement(_t,{value:n,onChange:l,options:m}),r.a.createElement($t,{operator:n,value:c,onChange:o}),r.a.createElement("p",null,JSON.stringify((t=Ft.filter[a])[n].apply(t,Object(d.a)(c)))),r.a.createElement("button",{onClick:s},"Save"))})),ta=(a(813),function(e){var t=e.tracks,a=e.onLoad,n=e.onRate,c=e.onChange,i=e.onFilter;return r.a.createElement("div",{className:"TracksSection-container"},r.a.createElement(ea,{onChange:i}),r.a.createElement(zt,{tracks:t,onLoad:a,onChange:c,onRate:n}))});function aa(e){var t,a=e.className,n=e.section,c=e.values,i=e.sectionItems,l=e.navBarSections,o=e.currentlyPlayingTrackId,s=e.playerState,u=e.item,m=e.onChangeItem,d=e.onLoadItems,h=e.onLoadItemChildren,f=e.sortBy,p=e.sortDesc,v=e.sortOptions,b=e.onMovePlaylistItem,y=e.onEditItem,k=e.onRefreshItem,g=e.onRefreshSection,I=e.onChangeSection,T=e.onRateTrack,S=e.onChangeSortBy,C=e.onFilterSection,O=e.searchQuery,L=e.onChangeSearchQuery,P=e.onCreateQueue;switch(n){case E.SEARCH:t=r.a.createElement(Yt,{query:O,hubs:i,onChange:m});break;case E.TRACK:t=r.a.createElement(ta,{tracks:i,onChange:m,onLoad:function(e,t){return d(n,e,t)},onRate:T,onFilter:C});break;default:t=r.a.createElement(Xe,{size:150,items:i,onChange:m,onLoad:function(e,t){return d(n,e,t)}})}return r.a.createElement("div",{className:Z()(a,"Browser")},r.a.createElement("div",{className:"Browser-grid"},r.a.createElement(Ht,{sections:l,currentSection:n,searchQuery:O,sortBy:f,sortDesc:p,sortOptions:v,onChangeSection:I,onChangeSearchQuery:L,onChangeSortBy:S,onRefreshSection:g}),r.a.createElement("div",{className:"Browser-grid-wrapper"},t)),u&&r.a.createElement(jt,{className:"Browser-selected-panel",item:u,values:c,playerState:s,currentlyPlayingTrackId:o,onClose:function(){return m(null)},onRefresh:k,onRateTrack:T,onNavigate:m,onEdit:y,onCreateQueue:P,onLoadItems:function(e,t){return h(u,e,t)},onMovePlaylistItem:b}))}aa.defaultProps={onChangeItem:Ee.a,onChangeSearchQuery:Ee.a,onChangeSection:Ee.a};var na=_()({onChangeItem:function(e){return function(t,a){var n=e.onChangeItem,r=e.onCreateQueue;return t===E.TRACK?r(t,a):n(t,a)}}})(aa),ra=function(e,t){var a=t.dispatch,n=t.onChangeSection,r=t.onLoadItems,c=t.section,i=t.itemId,l=t.itemType,o=e.section,s=e.itemId,u=e.itemType;if(null==c?n(E.ALBUM):o!==c&&r(c,0,30),u!==l||s!==i)switch(l){case E.ALBUM:a(Object(E.fetchAlbum)(i)),a(Object(E.fetchAlbumTracks)(i,0,15));break;case E.ARTIST:a(Object(E.fetchArtist)(i)),a(Object(E.fetchArtistAlbums)(i,0,100)).then(function(e){var t=e();E.selectAllArtistAlbums.values(t).get(i).forEach(function(e){return a(Object(E.fetchAlbumTracks)(e,0,100))})});break;case E.PLAYLIST:a(Object(E.fetchPlaylistItems)(i,0,15))}};var ca=function(e){return function(t,a,n){var r=e.dispatch;switch(t){case E.ALBUM:return r(Object(E.fetchCurrentLibraryAlbumsRange)(a,n));case E.ARTIST:return r(Object(E.fetchCurrentLibraryArtistsRange)(a,n));case E.PLAYLIST:return r(Object(E.fetchCurrentLibraryPlaylistsRange)(a,n));case E.TRACK:return r(Object(E.fetchCurrentLibraryTracksRange)(a,n));case E.SEARCH:return;default:console.error("Could not load items for section: ".concat(t))}}},ia=W()(Object(s.b)(function(e,t){var a,n,r;switch(t.section){case E.ALBUM:a=E.selectLibraryAlbums.sortBy(e),n=E.selectLibraryAlbums.sortDesc(e),r=E.selectLibraryAlbums.sortOptions(e);break;case E.ARTIST:a=E.selectLibraryArtists.sortBy(e),n=E.selectLibraryArtists.sortDesc(e),r=E.selectLibraryArtists.sortOptions(e);break;case E.PLAYLIST:a=E.selectLibraryPlaylists.sortBy(e),n=E.selectLibraryPlaylists.sortDesc(e),r=E.selectLibraryPlaylists.sortOptions(e);break;case E.TRACK:a=E.selectLibraryTracks.sortBy(e),n=E.selectLibraryTracks.sortDesc(e),r=E.selectLibraryTracks.sortOptions(e);break;default:a=null,n=!1,r=[]}return{trackId:E.selectQueue.trackId(e),libraryAlbumIds:E.selectLibraryAlbums.currentIds(e),libraryArtistIds:E.selectLibraryArtists.currentIds(e),libraryPlaylistIds:E.selectLibraryPlaylists.currentIds(e),libraryTrackIds:E.selectLibraryTracks.currentIds(e),playerState:E.selectTimeline.playerState(e),allAlbums:E.selectAllAlbums.values(e),allArtists:E.selectAllArtists.values(e),allArtistAlbums:E.selectAllArtistAlbums.values(e),allPlaylists:E.selectAllPlaylists.values(e),allPlaylistItems:E.selectAllPlaylistItems.values(e),allTracks:E.selectAllTracks.values(e),allAlbumTracks:E.selectAllAlbumTracks.values(e),sortBy:a,sortDesc:n,sortOptions:r,searchResults:[{title:"Albums",items:E.selectSearch.albums(e)},{title:"Artists",items:E.selectSearch.artists(e)},{title:"Playlists",items:E.selectSearch.playlists(e)},{title:"Tracks",items:E.selectSearch.tracks(e)}]}}),_()({onLoadItems:ca,onMovePlaylistItem:function(e){return function(t){var a=t.playlistId,n=t.newIndex,r=t.oldIndex;(0,e.dispatch)(Object(E.movePlaylistItem)({playlistId:a,newIndex:n,oldIndex:r}))}},onLoadItemChildren:function(e){return function(t,a,n){var r=e.dispatch;switch(t._type){case E.ALBUM:r(Object(E.fetchAlbumTracks)(t.id,a,n));break;case E.PLAYLIST:r(Object(E.fetchPlaylistItems)(t.id,a,n))}}},onRateTrack:function(e){return function(t,a){(0,e.dispatch)(Object(E.rateTrack)(t,a))}},onFilterSection:function(e){return function(t){var a=e.dispatch;a(Object(E.filterLibraryTracks)(t)),a(Object(E.fetchCurrentLibraryTracksRange)(0,30))}},onCreateQueue:function(e){return function(t,a,n){var r=e.dispatch;switch(t){case E.ALBUM:r(Object(E.createQueueFromAlbum)(a,n));break;case E.ARTIST:r(Object(E.createQueueFromArtist)(a,n));break;case E.PLAYLIST:r(Object(E.createQueueFromPlaylist)(a,n));break;case E.TRACK:r(Object(E.createQueueFromTrack)(a));break;default:console.warn("Could not create queue",{parentType:t,parentId:a,trackId:n})}}},onChangeSearchQuery:function(e){return function(t){(0,e.dispatch)(Object(E.fetchSearchResults)(t,10))}},onChangeSortBy:function(e){return function(t){var a=e.section,n=e.dispatch,r=e.sortBy,c=e.sortDesc,i=t===r&&!c;switch(a){case E.ALBUM:n(Object(E.sortLibraryAlbums)(t,i));break;case E.ARTIST:n(Object(E.sortLibraryArtists)(t,i));break;case E.PLAYLIST:n(Object(E.sortLibraryPlaylists)(t,i));break;case E.TRACK:n(Object(E.sortLibraryTracks)(t,i));break;default:console.error("Could not sort based on section:",a)}ca(e)(a,0,30)}},onEditItem:function(e){return Object(x.a)(A.a.mark(function t(){var a,n,r,c,i,l;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.dispatch,n=e.itemType,r=e.itemId,c=e.allPlaylists,t.t0=n,t.next=t.t0===E.PLAYLIST?4:12;break;case 4:if(i=c.get(r),null==(l=window.prompt("Enter new playlist title",i.title))){t.next=11;break}return t.next=9,a(Object(E.setPlaylistTitle)(r,l));case 9:return t.next=11,a(Object(E.forceFetchPlaylist)(r));case 11:return t.abrupt("break",13);case 12:console.error("Could not edit based on item type:",n);case 13:case"end":return t.stop()}},t,this)}))},onRefreshItem:function(e){return Object(x.a)(A.a.mark(function t(){var a,n,r;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.dispatch,n=e.itemType,r=e.itemId,t.t0=n,t.next=t.t0===E.ALBUM?4:t.t0===E.ARTIST?8:t.t0===E.PLAYLIST?12:16;break;case 4:return t.next=6,a(Object(E.resetAlbumTracks)(r));case 6:return a(Object(E.fetchAlbumTracks)(r,0,15)),t.abrupt("break",17);case 8:return t.next=10,a(Object(E.resetArtistAlbums)(r));case 10:return a(Object(E.fetchArtistAlbums)(r,0,15)),t.abrupt("break",17);case 12:return t.next=14,a(Object(E.resetPlaylistItems)(r));case 14:return a(Object(E.fetchPlaylistItems)(r,0,15)),t.abrupt("break",17);case 16:console.error("Could not refresh based on item type:",n);case 17:case"end":return t.stop()}},t,this)}))},onRefreshSection:function(e){return Object(x.a)(A.a.mark(function t(){var a,n;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.dispatch,n=e.section,t.t0=n,t.next=t.t0===E.ALBUM?4:t.t0===E.ARTIST?8:t.t0===E.PLAYLIST?12:t.t0===E.TRACK?16:20;break;case 4:return t.next=6,a(Object(E.resetCurrentLibraryAlbums)(n));case 6:return a(Object(E.fetchCurrentLibraryAlbumsRange)(0,30)),t.abrupt("break",21);case 8:return t.next=10,a(Object(E.resetCurrentLibraryArtists)(n));case 10:return a(Object(E.fetchCurrentLibraryArtistsRange)(0,30)),t.abrupt("break",21);case 12:return t.next=14,a(Object(E.resetCurrentLibraryPlaylists)(n));case 14:return a(Object(E.fetchCurrentLibraryPlaylistsRange)(0,30)),t.abrupt("break",21);case 16:return t.next=18,a(Object(E.resetCurrentLibraryTracks)(n));case 18:return a(Object(E.fetchCurrentLibraryTracksRange)(0,30)),t.abrupt("break",21);case 20:console.error("Could not refresh based on section type",n);case 21:case"end":return t.stop()}},t,this)}))}}),F()({componentWillMount:function(){ra({},this.props)},componentWillReceiveProps:function(e){ra(this.props,e)}}))(function(e){var t,a=e.section,n=e.itemType,c=e.itemId,i=e.searchResults,l=e.onChangeSearchQuery,o=e.libraryAlbumIds,s=e.libraryArtistIds,u=e.libraryPlaylistIds,m=e.libraryTrackIds,d=e.allAlbums,h=e.allArtists,f=e.allPlaylists,p=e.allTracks,v=e.allArtistAlbums,b=e.allAlbumTracks,y=e.allPlaylistItems,k=e.playerState,g=e.onEditItem,I=e.onRefreshItem,T=e.onRefreshSection,S=e.onChangeItem,C=e.onChangeSection,O=e.onLoadItems,L=e.onLoadItemChildren,P=e.sortBy,R=e.sortDesc,w=e.sortOptions,j=e.onChangeSortBy,N=e.onRateTrack,A=e.onFilterSection,x=e.onMovePlaylistItem,B=e.trackId,M=e.onCreateQueue,H=null;switch(n){case null:H=null;break;case E.ARTIST:H=h.get(c);break;case E.ALBUM:H=d.get(c);break;case E.PLAYLIST:H=f.get(c);break;default:console.error("Cannot set item based on itemType:",n),H=null}var D=null;switch(a){case E.SEARCH:D=i;break;case E.ALBUM:D=o.map(function(e){return d.get(e)});break;case E.ARTIST:D=s.map(function(e){return h.get(e)});break;case E.PLAYLIST:D=u.map(function(e){return f.get(e)});break;case E.TRACK:D=m.map(function(e){return p.get(e)});break;default:console.error("Cannot set sectionItems based on section:",a),D=[]}return r.a.createElement(na,{item:H,section:a,sectionItems:D,currentlyPlayingTrackId:B,sortBy:P,sortDesc:R,sortOptions:w,values:{albums:d,artists:h,artistAlbums:v,playlists:f,playlistItems:y,tracks:p,albumTracks:b},navBarSections:(t={},Object(ke.a)(t,E.SEARCH,"Search"),Object(ke.a)(t,E.ALBUM,"Albums"),Object(ke.a)(t,E.ARTIST,"Artists"),Object(ke.a)(t,E.PLAYLIST,"Playlists"),Object(ke.a)(t,E.TRACK,"Tracks"),t),playerState:k,onEditItem:g,onRefreshItem:I,onRefreshSection:T,onChangeItem:S,onChangeSection:C,onCreateQueue:M,onLoadItems:O,onMovePlaylistItem:x,onLoadItemChildren:L,onRateTrack:N,onFilterSection:A,onChangeSearchQuery:l,onChangeSortBy:j})}),la=a(476),oa=a.n(la),sa=a(477),ua=a.n(sa),ma=new window.AudioContext,da=function(e){function t(){var e;return Object(T.a)(this,t),(e=Object(C.a)(this,Object(O.a)(t).call(this))).state={buffered:0,currentTime:0,duration:0},e.audio=new ua.a({context:ma}),e.handleAudioDurationChange=e.handleAudioDurationChange.bind(Object(Me.a)(Object(Me.a)(e))),e.handleAudioEnded=e.handleAudioEnded.bind(Object(Me.a)(Object(Me.a)(e))),e.handleAudioProgress=e.handleAudioProgress.bind(Object(Me.a)(Object(Me.a)(e))),e.handleAudioTimeUpdate=e.handleAudioTimeUpdate.bind(Object(Me.a)(Object(Me.a)(e))),e}return Object(L.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){this.audio.audioElement.addEventListener("durationchange",this.handleAudioDurationChange),this.audio.audioElement.addEventListener("ended",this.handleAudioEnded),this.audio.audioElement.addEventListener("progress",this.handleAudioProgress),this.audio.audioElement.addEventListener("timeupdate",this.handleAudioTimeUpdate),this.receiveProps({},this.props)}},{key:"componentWillReceiveProps",value:function(e){this.receiveProps(this.props,e)}},{key:"componentWillUnmount",value:function(){this.audio.audioElement.removeEventListener("durationchange",this.handleAudioDurationChange),this.audio.audioElement.removeEventListener("ended",this.handleAudioEnded),this.audio.audioElement.removeEventListener("pause",this.handleAudioPause),this.audio.audioElement.removeEventListener("progress",this.handleAudioProgress),this.audio.audioElement.removeEventListener("timeupdate",this.handleAudioTimeUpdate),this.audio.stop()}},{key:"receiveProps",value:function(e,t){var a=t.source,n=t.playerState,r=e.source,c=e.playerState;if(a!==r&&(this.updateSource(a),n===E.PLAYER_STATE_PLAYING&&this.handlePlay()),n!==c)switch(n){case E.PLAYER_STATE_PAUSED:this.handlePause();break;case E.PLAYER_STATE_PLAYING:this.handlePlay();break;case E.PLAYER_STATE_STOPPED:this.handleStop();break;default:console.error("Could not handle playerState:",n)}}},{key:"handleAudioDurationChange",value:function(){var e=this.audio.duration();this.setState({duration:e}),this.props.onDurationChange(e)}},{key:"handleAudioEnded",value:function(){this.props.onEnd()}},{key:"handleAudioProgress",value:function(){var e=this.audio.buffered();this.setState({buffered:e}),this.props.onProgress(e)}},{key:"handleAudioTimeUpdate",value:function(){var e=this.audio.currentTime();this.setState({currentTime:e}),this.props.onTimeUpdate(e)}},{key:"updateSource",value:function(e){this.audio.loadSource(e)}},{key:"handlePlay",value:function(){this.audio.play()}},{key:"handlePause",value:function(){this.audio.pause()}},{key:"handleStop",value:function(){this.audio.stop()}},{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.duration,r=e({buffered:t.buffered,currentTime:t.currentTime,duration:a});return n.Children.only(r)}}]),t}(n.Component);da.defaultProps={onDurationChange:Ee.a,onEnd:Ee.a,onProgress:Ee.a,onTimeUpdate:Ee.a};a(816),a(818);function ha(e){var t=e.buffered,a=e.currentTime,n=e.duration;return r.a.createElement("div",{className:"Timeline"},r.a.createElement("div",{className:"Timeline-timestamp Timeline-currentTime"},r.a.createElement(ct,{value:a,unit:"s",trim:!1})),r.a.createElement("div",{className:"Timeline-track"},r.a.createElement("div",{className:"Timeline-trackBar Timeline-trackBuffered",style:{width:"".concat(t/n*100,"%")}}),r.a.createElement("div",{className:"Timeline-trackBar Timeline-trackCurrentTime",style:{width:"".concat(a/n*100,"%")}})),r.a.createElement("div",{className:"Timeline-timestamp Timeline-duration"},r.a.createElement(ct,{value:n,unit:"s",trim:!1})))}var fa=a(478),pa=a.n(fa);a(820);function va(e){var t=e.className,a=e.value,n=e.maxValue,c=e.onRate;return r.a.createElement(pa.a,{className:Z()(t,"RatingStars"),start:0,stop:n/2,initialRating:a/2,fractions:2,onChange:function(e){return c(2*e)},emptySymbol:r.a.createElement($,{icon:"star",className:"RatingStars-empty"}),fullSymbol:r.a.createElement($,{icon:"star",className:"RatingStars-full"})})}va.defaultProps={value:0,maxValue:10};var ba=W()(fe()({onNavigate:R.a.func.isRequired}),_()({onGoToArtist:function(e){return function(){var t=e.track;(0,e.onNavigate)(E.ARTIST,t.grandparentId)}},onGoToAlbum:function(e){return function(){var t=e.track;(0,e.onNavigate)(E.ALBUM,t.parentId)}}}))(function(e){var t=e.audio,a=e.track,n=e.paused,c=e.shuffled,i=e.onStop,l=e.onPrev,o=e.onPlay,s=e.onPause,u=e.onNext,m=e.onPlayer,d=e.onRateTrack,h=e.onShuffle,f=e.fullScreenMode,p=e.onGoToArtist,v=e.onGoToAlbum;return r.a.createElement("div",{className:"Controls"},f||r.a.createElement(Ze,{src:a.thumb}),r.a.createElement("div",{className:"Controls-contents"},r.a.createElement("div",{className:"Controls-playback"},r.a.createElement("button",{onClick:l,className:"Controls-playback-prev"},r.a.createElement($,{icon:"to-start"})),r.a.createElement("button",{onClick:n?o:s,className:"Controls-playback-play"},r.a.createElement($,{icon:n?"play":"pause"})),r.a.createElement("button",{onClick:u,className:"Controls-playback-next"},r.a.createElement($,{icon:"to-end"})),r.a.createElement("button",{onClick:i,className:"Controls-playback-stop"},r.a.createElement($,{icon:"stop"}))),r.a.createElement("div",{className:"Controls-centerBlock"},r.a.createElement("div",{className:"Controls-trackInfo"},r.a.createElement("button",{onClick:v,className:"Controls-trackInfo-title"},a.title),r.a.createElement("span",{className:"Controls-trackInfo-seperator"},"\u2014"),r.a.createElement("button",{onClick:p,className:"Controls-trackInfo-artist"},a.originalTitle)),r.a.createElement("div",{className:"Controls-timeline"},r.a.createElement("button",{onClick:h,className:Z()("Controls-shuffle",{"Controls-shuffle_enabled":c})},r.a.createElement($,{icon:"shuffle"})),r.a.createElement(ha,{buffered:t.buffered,currentTime:t.currentTime,duration:t.duration}),r.a.createElement($,{icon:"cw",className:"Controls-repeat"}))),r.a.createElement(va,{className:"Controls-rating",value:a.userRating||0,maxValue:10,onRate:function(e){return d(a.id,e)}}),r.a.createElement("button",{className:"Controls-albumThumbButton",onClick:m},r.a.createElement(Le,{className:"Controls-albumThumb",imageClassName:"Controls-albumThumbImage",src:a.thumb}))))}),ya=function(e){function t(){var e;return Object(T.a)(this,t),(e=Object(C.a)(this,Object(O.a)(t).call(this))).handleNextTrack=e.handleNextTrack.bind(Object(Me.a)(Object(Me.a)(e))),e.handlePause=e.handlePause.bind(Object(Me.a)(Object(Me.a)(e))),e.handlePlay=e.handlePlay.bind(Object(Me.a)(Object(Me.a)(e))),e.handlePrevTrack=e.handlePrevTrack.bind(Object(Me.a)(Object(Me.a)(e))),e.handlePlayer=e.handlePlayer.bind(Object(Me.a)(Object(Me.a)(e))),e.handleRateTrack=e.handleRateTrack.bind(Object(Me.a)(Object(Me.a)(e))),e.handleShuffle=e.handleShuffle.bind(Object(Me.a)(Object(Me.a)(e))),e.handleStop=e.handleStop.bind(Object(Me.a)(Object(Me.a)(e))),e.handleTimeUpdate=oa()(e.handleTimeUpdate.bind(Object(Me.a)(Object(Me.a)(e))),1e3),e}return Object(L.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.dispatch,a=e.queueId;null!=a&&t(Object(E.fetchQueue)(a))}},{key:"componentWillReceiveProps",value:function(e){var t=e.dispatch,a=e.track,n=this.props.track,r=a&&a.id,c=n&&n.id;c!==r&&(null!=c&&t(Object(E.sendTimelineStop)(this.props.queueItem)),null!=r&&e.playerState===E.PLAYER_STATE_PLAYING&&t(Object(E.sendTimelinePlay)(e.queueItem)))}},{key:"handleNextTrack",value:function(){(0,this.props.dispatch)(Object(E.playNextTrack)())}},{key:"handlePrevTrack",value:function(){(0,this.props.dispatch)(Object(E.playPrevTrack)())}},{key:"handleRateTrack",value:function(e,t){(0,this.props.dispatch)(Object(E.rateTrack)(e,t))}},{key:"handleStop",value:function(){var e=this.props.dispatch;e(Object(E.stopQueue)()),e(Object(E.setDisplayPlayer)(!1))}},{key:"handlePause",value:function(){var e=this.props,t=e.dispatch,a=e.queueItem;t(Object(E.sendTimelinePause)(a))}},{key:"handlePlay",value:function(){var e=this.props,t=e.dispatch,a=e.queueItem;t(Object(E.sendTimelinePlay)(a))}},{key:"handleTimeUpdate",value:function(e){var t=this.props,a=t.dispatch,n=t.queueItem;null!=n&&a(Object(E.setPlayerCurrentTime)(n,Math.round(1e3*e)))}},{key:"handlePlayer",value:function(){(0,this.props.dispatch)(Object(E.toggleDisplayPlayer)())}},{key:"handleShuffle",value:function(){(0,this.props.dispatch)(Object(E.toggleShuffleQueue)())}},{key:"render",value:function(){var e=this,t=this.props,a=t.track,n=t.trackSrc,c=t.shuffled,i=t.playerState,l=t.fullScreenMode,o=t.onNavigate;return null==a?null:r.a.createElement(da,{duration:a.duration/1e3,onEnd:this.handleNextTrack,onTimeUpdate:this.handleTimeUpdate,playerState:i,source:n},function(t){return r.a.createElement(ba,{audio:t,onNext:e.handleNextTrack,onPause:e.handlePause,onPlay:e.handlePlay,onPrev:e.handlePrevTrack,onPlayer:e.handlePlayer,onRateTrack:e.handleRateTrack,onShuffle:e.handleShuffle,onStop:e.handleStop,paused:i===E.PLAYER_STATE_PAUSED,shuffled:c,track:a,fullScreenMode:l,onNavigate:o})})}}]),t}(n.Component),ka=Object(s.b)(function(e){return{queueId:E.selectQueue.queueId(e),queueItem:E.selectQueue.queueItem(e),track:E.selectQueue.track(e),trackSrc:E.selectQueue.trackSrc(e),shuffled:E.selectQueue.shuffled(e),playerState:E.selectTimeline.playerState(e),fullScreenMode:Object(E.selectDisplayPlayer)(e)}})(ya),ga=(a(822),a(824),new ot.SortableElement(_()({onRate:function(e){return function(t){var a=e.track;(0,e.onRate)(a.id,t)}}})(function(e){var t=e.style,a=e.track,n=e.isSelected,c=e.onClick,i=e.onRate;return r.a.createElement("button",{style:t,className:Z()("PlayerItem",{"PlayerItem-selected":n}),onClick:c},r.a.createElement("div",{className:"PlayerItem-text"},r.a.createElement("div",{className:"PlayerItem-title"},a.title),r.a.createElement("div",{className:"PlayerItem-artist"},a.grandparentTitle)),r.a.createElement(lt,{className:"PlayerItem-rating",value:a.userRating,maxValue:10,onRate:i}),r.a.createElement(ct,{className:"PlayerItem-time",value:a.duration}),r.a.createElement(st,{className:"PlayerItem-sortHandle"}))})));function Ea(e){var t=e.className,a=e.selectedTrackId,n=e.items,c=e.values,i=e.onChange,l=e.onSort,o=e.onRateTrack;return r.a.createElement(Ot,{className:t,rowCount:n.length,renderItem:function(e){var t=e.key,l=e.style,s=e.index,u=n[s],m=c.tracks.get(u.track);return null==m?r.a.createElement("div",{key:t,style:l}):r.a.createElement(ga,{key:u.id||t,style:l,index:s,track:m,isSelected:a===u.track,onClick:function(){return i&&i(u)},onRate:o})},isRowLoaded:function(e){var t=e.index;return null!=n[t]},itemHeight:60,rowHeight:60,onSortEnd:l,useDragHandle:!0,lockAxis:"y",helperClass:"PlayerItem-helper SortHandle-helper",style:{paddingTop:"50px"}})}var Ia=function(e){var t=e.values,a=e.items,n=e.selectedTrackId,c=e.onChange,i=e.onSort,l=e.onRateTrack,o=t.tracks.get(n);return null==o?null:r.a.createElement("div",{className:"Player"},r.a.createElement(Ze,{src:o.thumb}),r.a.createElement("div",{className:"Player-currentAlbum"},r.a.createElement(Le,{className:"Player-albumThumb",imageClassName:"Player-albumThumbImage",src:o.thumb,size:640}),r.a.createElement("div",{className:"Player-albumTitle"},o.parentTitle),r.a.createElement("div",{className:"Player-artistTitle"},o.grandparentTitle)),r.a.createElement("div",{className:"Player-list"},r.a.createElement(Ea,{values:t,items:a,selectedTrackId:n,onChange:c,onSort:i,onRateTrack:l})))};var Ta=W()(Object(s.b)(function(e){return{values:{tracks:E.selectAllTracks.values(e)},items:E.selectQueue.items(e),selectedTrackId:E.selectQueue.trackId(e)}}),_()({onChange:function(e){return function(t){return(0,e.dispatch)(Object(E.playQueueItem)(t.id))}},onSort:function(e){return function(t){var a=t.newIndex,n=t.oldIndex;return(0,e.dispatch)(Object(E.moveQueueItem)({newIndex:a,oldIndex:n}))}},onRateTrack:function(e){return function(t,a){(0,e.dispatch)(Object(E.rateTrack)(t,a))}}}))(function(e){var t=e.items,a=e.values,n=e.selectedTrackId,c=e.onChange,i=e.onSort,l=e.onRateTrack;return r.a.createElement(Ia,{items:t,values:a,selectedTrackId:n,onChange:c,onSort:i,onRateTrack:l})}),Sa=(a(826),function(e){var t=e.children,a=e.onClose;return r.a.createElement("div",{className:"Modal"},r.a.createElement("button",{className:"Modal-overlay",onClick:a}),r.a.createElement("div",{className:"Modal-window"},r.a.createElement("div",{className:"Modal-content"},t)))});a(828);var Ca=_()({onSelect:function(e){return function(){var t=e.playlist;(0,e.onSelect)(t)}}})(function(e){var t=e.playlist,a=e.style,n=e.onSelect;return r.a.createElement("button",{className:"PlaylistListItem",style:a,onClick:n},r.a.createElement("div",{className:"PlaylistListItem-contents"},r.a.createElement(Le,{className:"PlaylistListItem-image",src:t.composite,alt:t.title,size:100,quality:50}),r.a.createElement("span",{className:"PlaylistListItem-title"},t.title)))});function Oa(e){var t=e.playlistIds,a=e.renderPlaylistItem,n=e.onLoadItems,c=[{size:t.length,items:t,render:a}];return r.a.createElement(vt,{layout:c,onLoad:n},function(e){var t=e.rowCount,a=e.isRowLoaded,n=e.renderItem,c=e.onLoad;return r.a.createElement(at,{rowHeight:60,rowCount:t,renderItem:n,isRowLoaded:a,onLoad:c})})}Oa.defaultProps={playlistIds:[]};var La=W()(fe()({values:R.a.shape({playlists:R.a.instanceOf(Map).isRequired}).isRequired,onSelectPlaylist:R.a.func.isRequired}),_()({renderPlaylistItem:function(e){return function(t){return function(a){var n=a.key,c=a.style,i=e.values,l=e.onSelectPlaylist,o=i.playlists.get(t);return null==o?r.a.createElement("div",{key:n,style:c}):r.a.createElement(Ca,{key:n,style:c,playlist:o,onSelect:l})}}}}))(Oa);var Pa=W()(Object(s.b)(function(e){return{trackToAddToPlaylist:Object(E.selectTrackToAddToPlaylist)(e),playlistIds:E.selectLibraryPlaylistsRegular.currentIds(e),values:{playlists:E.selectAllPlaylists.values(e)}}}),_()({onSelectPlaylist:function(e){return function(t){var a=e.dispatch,n=e.trackToAddToPlaylist;a(Object(E.addTrackToPlaylist)(n,t.id)),a(Object(E.setTrackToAddToPlaylist)(null))}},onLoadItems:function(e){return function(t,a){return(0,e.dispatch)(Object(E.fetchCurrentLibraryPlaylistsRegularRange)(t,a))}},onClose:function(e){return function(){return(0,e.dispatch)(Object(E.setTrackToAddToPlaylist)(null))}}}),F()({componentWillMount:function(){(0,this.props.onLoadItems)(0,30)}}))(function(e){var t=e.trackToAddToPlaylist,a=e.playlistIds,n=e.values,c=e.onSelectPlaylist,i=e.onLoadItems,l=e.onClose;return null==t?null:r.a.createElement(Sa,{onClose:l},r.a.createElement(La,{playlistIds:a,values:n,onSelectPlaylist:c,onLoadItems:i}))});var Ra=W()(_()({onChangeSection:function(e){return function(t){var a=e.history,n=e.location;if(t===e.section)return null;var r=new window.URLSearchParams(n.search);r.set("section",t),a.push({pathname:n.pathname,search:r.toString()})}},onChangeItem:function(e){return function(t,a){var n=e.history,r=e.location,c=new window.URLSearchParams(r.search);c.set("itemType",t),c.set("itemId",a),n.push({pathname:r.pathname,search:c.toString()})}}}),me()(function(e){var t=new window.URLSearchParams(e.location.search),a=parseInt(t.get("itemId"),10);return{section:t.get("section"),itemType:t.get("itemType"),itemId:isNaN(a)?null:a}}))(function(e){var t=e.displayPlayer,a=e.section,n=e.itemType,c=e.itemId,i=e.onChangeSection,l=e.onChangeItem,o=r.a.createElement("div",{className:"App-browser"},r.a.createElement(ia,{section:a,itemType:n,itemId:c,onChangeItem:l,onChangeSection:i}));return t&&(o=r.a.createElement(Ta,null)),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-main"},o),r.a.createElement(ka,{onNavigate:l}),r.a.createElement(Pa,null),r.a.createElement(ye,{onNavigate:l}))});var wa=Object(s.b)(function(e){return{displayPlayer:Object(E.selectDisplayPlayer)(e)}})(function(e){var t=e.history,a=e.location,n=e.displayPlayer;return r.a.createElement(Ra,{displayPlayer:n,location:a,history:t})}),ja=function(e){function t(){return Object(T.a)(this,t),Object(C.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(S.a)(t,[{key:"getChildContext",value:function(){return{library:this.props.library}}},{key:"render",value:function(){var e=this.props,t=e.ready,a=e.match,n=e.location,c=e.loggedIn,i=e.librarySectionId;return t?"/login"===n.pathname||c?"/settings"!==n.pathname&&null==i&&c?r.a.createElement(w.a,{to:"/settings"}):a.isExact?r.a.createElement(w.a,{to:"/library"}):r.a.createElement(j,null,r.a.createElement(m.a,{path:"/login",component:Q}),r.a.createElement(m.a,{path:"/settings",component:se}),r.a.createElement(m.a,{path:"/library",component:wa})):r.a.createElement(w.a,{to:"/login"}):r.a.createElement(j,null,r.a.createElement(D,null))}}]),t}(n.Component);ja.childContextTypes={library:R.a.shape({})};var Na=Object(s.b)(function(e){return{library:E.selectPlex.library(e),ready:E.selectPlex.ready(e),loggedIn:E.selectUser.loggedIn(e),librarySectionId:Object(E.selectLibrarySectionId)(e)}})(ja),Aa=o()(),xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h.applyMiddleware.apply(void 0,Object(d.a)(e.middleware).concat(Object(d.a)(E.middleware),[Object(f.createLogger)({predicate:function(){return!1},collapsed:!0})])),a=g()(["queue","user","plex.instance.serverId","ui.librarySectionId"])(y()(window.localStorage));return Object(h.createStore)(I,Object(h.compose)(t,v()(a,"plex")))}({middleware:[Object(u.b)(Aa)]});i.a.render(r.a.createElement(s.a,{store:xa},r.a.createElement(u.a,{history:Aa},r.a.createElement(m.a,{path:"/",component:Na}))),document.getElementById("root"))}},[[480,2,1]]]);
//# sourceMappingURL=main.81b3ed8c.chunk.js.map